<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>XMonad.Prompt.OrgMode</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">xmonad-contrib-0.18.1: Community-maintained extensions for xmonad</span><ul class="links" id="page-menu"><li><a href="src/XMonad.Prompt.OrgMode.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th valign="top">Copyright</th><td>(c) 2021  Tony Zorman</td></tr><tr><th>License</th><td>BSD3-style (see LICENSE)</td></tr><tr><th>Maintainer</th><td>Tony Zorman &lt;soliditsallgood@mailbox.org&gt;</td></tr><tr><th>Stability</th><td>experimental</td></tr><tr><th>Portability</th><td>unknown</td></tr><tr><th>Safe Haskell</th><td>Safe-Inferred</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">XMonad.Prompt.OrgMode</p></div><div id="table-of-contents"><div id="contents-list"><p class="caption" onclick="window.scrollTo(0,0)">Contents</p><ul><li><a href="#g:1">Usage</a></li><li><a href="#g:2">Prompts</a></li><li><a href="#g:3">Types</a></li></ul></div></div><div id="description"><p class="caption">Description</p><div class="doc"><p>A prompt for interacting with <a href="https://orgmode.org/">org-mode</a>.
 This can be seen as an org-specific version of
 <a href="XMonad-Prompt-AppendFile.html">XMonad.Prompt.AppendFile</a>, allowing for more interesting
 interactions with that particular file type.</p><p>It can be used to quickly save TODOs, NOTEs, and the like with the
 additional capability to schedule/deadline a task, add a priority,
 refile to some existing heading, and use the system's clipboard
 (really: the primary selection) as the contents of the note.</p><p>A blog post highlighting some features of this module can be found
 <a href="https://tony-zorman.com/posts/orgmode-prompt/2022-08-27-xmonad-and-org-mode.html">here</a>.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><a href="#v:orgPrompt">orgPrompt</a> :: <a href="XMonad-Prompt.html#t:XPConfig" title="XMonad.Prompt">XPConfig</a> -&gt; <a href="XMonad-Config-Prime.html#t:String" title="XMonad.Config.Prime">String</a> -&gt; <a href="XMonad-Config-Prime.html#t:FilePath" title="XMonad.Config.Prime">FilePath</a> -&gt; <a href="XMonad-Config-Prime.html#t:X" title="XMonad.Config.Prime">X</a> ()</li><li class="src short"><a href="#v:orgPromptRefile">orgPromptRefile</a> :: <a href="XMonad-Prompt.html#t:XPConfig" title="XMonad.Prompt">XPConfig</a> -&gt; <a href="XMonad-Config-Prime.html#t:String" title="XMonad.Config.Prime">String</a> -&gt; <a href="XMonad-Config-Prime.html#t:FilePath" title="XMonad.Config.Prime">FilePath</a> -&gt; <a href="XMonad-Config-Prime.html#t:X" title="XMonad.Config.Prime">X</a> ()</li><li class="src short"><a href="#v:orgPromptRefileTo">orgPromptRefileTo</a> :: <a href="XMonad-Prompt.html#t:XPConfig" title="XMonad.Prompt">XPConfig</a> -&gt; <a href="XMonad-Config-Prime.html#t:String" title="XMonad.Config.Prime">String</a> -&gt; <a href="XMonad-Config-Prime.html#t:String" title="XMonad.Config.Prime">String</a> -&gt; <a href="XMonad-Config-Prime.html#t:FilePath" title="XMonad.Config.Prime">FilePath</a> -&gt; <a href="XMonad-Config-Prime.html#t:X" title="XMonad.Config.Prime">X</a> ()</li><li class="src short"><a href="#v:orgPromptPrimary">orgPromptPrimary</a> :: <a href="XMonad-Prompt.html#t:XPConfig" title="XMonad.Prompt">XPConfig</a> -&gt; <a href="XMonad-Config-Prime.html#t:String" title="XMonad.Config.Prime">String</a> -&gt; <a href="XMonad-Config-Prime.html#t:FilePath" title="XMonad.Config.Prime">FilePath</a> -&gt; <a href="XMonad-Config-Prime.html#t:X" title="XMonad.Config.Prime">X</a> ()</li><li class="src short"><span class="keyword">data</span> <a href="#t:ClipboardSupport">ClipboardSupport</a><ul class="subs"><li>= <a href="#v:PrimarySelection">PrimarySelection</a></li><li>| <a href="#v:NoClpSupport">NoClpSupport</a></li></ul></li><li class="src short"><span class="keyword">data</span> <a href="#t:OrgMode">OrgMode</a></li></ul></details></div><div id="interface"><a href="#g:1" id="g:1"><h1>Usage</h1></a><div class="doc"><p>You can use this module by importing it, along with <a href="XMonad-Prompt.html">XMonad.Prompt</a>, in
your <code>xmonad.hs</code></p><pre>import XMonad.Prompt
import XMonad.Prompt.OrgMode (orgPrompt)</pre><p>and adding an appropriate keybinding.  For example, using syntax from
<a href="XMonad-Util-EZConfig.html">XMonad.Util.EZConfig</a>:</p><pre>, (&quot;M-C-o&quot;, orgPrompt def &quot;TODO&quot; &quot;/home/me/org/todos.org&quot;)</pre><p>This would create notes of the form <code>* TODO <em>my-message</em></code> in the
specified file.</p><p>You can also enter a relative path; in that case the file path will be
prepended with <code>$HOME</code> or an equivalent directory.  I.e. instead of the
above you can write</p><pre>, (&quot;M-C-o&quot;, orgPrompt def &quot;TODO&quot; &quot;org/todos.org&quot;)
               -- also possible: &quot;~/org/todos.org&quot;</pre><p>There is also some scheduling and deadline functionality present.  This
may be initiated by entering <code>+s</code> or <code>+d</code>&#8212;separated by at least one
whitespace character on either side&#8212;into the prompt, respectively.
Then, one may enter a date and (optionally) a time of day.  Any of the
following are valid dates, where brackets indicate optionality:</p><ul><li>tod[ay]</li><li>tom[orrow]</li><li><em>any weekday</em></li><li><em>any date of the form DD [MM] [YYYY]</em></li></ul><p>In the last case, the missing month and year will be filled out with the
current month and year.</p><p>For weekdays, we also disambiguate as early as possible; a simple <code>w</code>
will suffice to mean Wednesday, but <code>s</code> will not be enough to say
Sunday.  You can, however, also write the full word without any
troubles.  Weekdays always schedule into the future; e.g., if today is
Monday and you schedule something for Monday, you will actually schedule
it for the <em>next</em> Monday (the one in seven days).</p><p>The time is specified in the <code>HH:MM</code> or <code>HHMM</code> format.  The minutes may
be omitted, in which case we assume a full hour is specified.  It is also
possible to enter a time span using the syntax <code>HH:MM-HH:MM</code> or <code>HH:MM+HH</code>.
In the former case, minutes may be omitted.</p><p>A few examples are probably in order.  Suppose we have bound the key
above, pressed it, and are now confronted with a prompt:</p><ul><li><code>hello +s today</code> would create a TODO note with the header <code>hello</code>
    and would schedule that for today's date.</li><li><code>hello +s today 12</code> schedules the note for today at 12:00.</li><li><code>hello +s today 12:30</code> schedules it for today at 12:30.</li><li><code>hello +d today 12:30</code> works just like above, but creates a
    deadline.</li><li><code>hello +d today 12:30-14:30</code> works like the above, but gives the
    event a duration of two hours.  An alternative way to specify
    this would be <code>hello +d today 12:30+2</code>.</li><li><code>hello +s thu</code> would schedule the note for next thursday.</li><li><code>hello +s 11</code> would schedule it for the 11th of this month and this
    year.</li><li><code>hello +s 11 jan 2013</code> would schedule the note for the 11th of
    January 2013.</li></ul><p>Note that, due to ambiguity concerns, years below <code>25</code> result in
undefined parsing behaviour.  Otherwise, what should <code>message +s 11 jan
13</code> resolve to&#8212;the 11th of january at 13:00 or the 11th of january in
the year 13?</p><p>There is basic support for alphabetic org-mode
<a href="https://orgmode.org/manual/Priorities.html">priorities</a>.
Simply append either <code>#A</code>, <code>#B</code>, or <code>#C</code> (capitalisation is optional) to
the end of the note.  For example, one could write <code>&quot;hello +s 11 jan
2013 #A&quot;</code> or <code>&quot;hello #C&quot;</code>.  Note that there has to be at least one
whitespace character between the end of the note and the chosen
priority.</p><p>There's also the possibility to take what's currently in the primary
selection and paste that as the content of the created note.  This is
especially useful when you want to quickly save a URL for later and
return to whatever you were doing before.  See the <code><a href="XMonad-Prompt-OrgMode.html#v:orgPromptPrimary" title="XMonad.Prompt.OrgMode">orgPromptPrimary</a></code>
prompt for that.</p><p>Finally, <code><a href="XMonad-Prompt-OrgMode.html#v:orgPromptRefile" title="XMonad.Prompt.OrgMode">orgPromptRefile</a></code> and <code><a href="XMonad-Prompt-OrgMode.html#v:orgPromptRefileTo" title="XMonad.Prompt.OrgMode">orgPromptRefileTo</a></code> provide support to
automatically
<a href="https://orgmode.org/manual/Refile-and-Copy.html">refile</a>
the generated item under a heading of choice.  For example, binding</p><pre>orgPromptRefile def &quot;TODO&quot; &quot;todos.org&quot;</pre><p>to a key will first pop up an ordinary prompt that works exactly like
<code><a href="XMonad-Prompt-OrgMode.html#v:orgPrompt" title="XMonad.Prompt.OrgMode">orgPrompt</a></code>, and then query the user for an already existing heading
(with completions) as provided by the <code>~/todos.org</code> file.  If that
prompt is cancelled, the heading will appear in the org file as normal
(i.e., at the end of the file); otherwise, it gets refiled under the
selected heading.</p></div><a href="#g:2" id="g:2"><h1>Prompts</h1></a><div class="top"><p class="src"><a id="v:orgPrompt" class="def">orgPrompt</a> <a href="src/XMonad.Prompt.OrgMode.html#orgPrompt" class="link">Source</a> <a href="#v:orgPrompt" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="XMonad-Prompt.html#t:XPConfig" title="XMonad.Prompt">XPConfig</a></td><td class="doc"><p>Prompt configuration</p></td></tr><tr><td class="src">-&gt; <a href="XMonad-Config-Prime.html#t:String" title="XMonad.Config.Prime">String</a></td><td class="doc"><p>What kind of note to create; will be displayed after
   a single <code>*</code></p></td></tr><tr><td class="src">-&gt; <a href="XMonad-Config-Prime.html#t:FilePath" title="XMonad.Config.Prime">FilePath</a></td><td class="doc"><p>Path to <code>.org</code> file, e.g. <code>home/me/todos.org</code></p></td></tr><tr><td class="src">-&gt; <a href="XMonad-Config-Prime.html#t:X" title="XMonad.Config.Prime">X</a> ()</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Prompt for interacting with <code>org-mode</code>.</p></div></div><div class="top"><p class="src"><a id="v:orgPromptRefile" class="def">orgPromptRefile</a> :: <a href="XMonad-Prompt.html#t:XPConfig" title="XMonad.Prompt">XPConfig</a> -&gt; <a href="XMonad-Config-Prime.html#t:String" title="XMonad.Config.Prime">String</a> -&gt; <a href="XMonad-Config-Prime.html#t:FilePath" title="XMonad.Config.Prime">FilePath</a> -&gt; <a href="XMonad-Config-Prime.html#t:X" title="XMonad.Config.Prime">X</a> () <a href="src/XMonad.Prompt.OrgMode.html#orgPromptRefile" class="link">Source</a> <a href="#v:orgPromptRefile" class="selflink">#</a></p><div class="doc"><p>Like <code><a href="XMonad-Prompt-OrgMode.html#v:orgPrompt" title="XMonad.Prompt.OrgMode">orgPrompt</a></code> (which see for the other arguments), but offer to
 refile the entered note afterwards.</p><p>Note that refiling is done by shelling out to Emacs, hence an <code>emacs</code>
 binary must be in <code>$PATH</code>.  One may customise this by following the
 instructions in <a href="XMonad-Util-Run.html#g:EDSL">XMonad.Util.Run</a>; more specifically, by
 changing the <code><a href="XMonad-Util-Run.html#v:emacs" title="XMonad.Util.Run">emacs</a></code> field of
 <code><a href="XMonad-Util-Run.html#t:ProcessConfig" title="XMonad.Util.Run">ProcessConfig</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:orgPromptRefileTo" class="def">orgPromptRefileTo</a> <a href="src/XMonad.Prompt.OrgMode.html#orgPromptRefileTo" class="link">Source</a> <a href="#v:orgPromptRefileTo" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="XMonad-Prompt.html#t:XPConfig" title="XMonad.Prompt">XPConfig</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="XMonad-Config-Prime.html#t:String" title="XMonad.Config.Prime">String</a></td><td class="doc"><p>Heading to refile the entry under.</p></td></tr><tr><td class="src">-&gt; <a href="XMonad-Config-Prime.html#t:String" title="XMonad.Config.Prime">String</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="XMonad-Config-Prime.html#t:FilePath" title="XMonad.Config.Prime">FilePath</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="XMonad-Config-Prime.html#t:X" title="XMonad.Config.Prime">X</a> ()</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Like <code><a href="XMonad-Prompt-OrgMode.html#v:orgPromptRefile" title="XMonad.Prompt.OrgMode">orgPromptRefile</a></code>, but with a fixed heading for refiling; no
 prompt will appear to query for a target.</p><p>Heading names may omit tags, but generally need to be prefixed by the
 correct todo keywords; e.g.,</p><pre>orgPromptRefileTo def &quot;PROJECT Work&quot; &quot;TODO&quot; &quot;~/todos.org&quot;</pre><p>Will refile the created note <code>&quot;TODO <a href="text">text</a>&quot;</code> to the <code>&quot;PROJECT Work&quot;</code>
 heading, even with the actual name is <code>&quot;PROJECT Work
 :work:other_tags:&quot;</code>.  Just entering <code><a href="Work.html">Work</a></code> will not work, as Emacs
 doesn't recognise <code><a href="PROJECT.html">PROJECT</a></code> as an Org keyword by default (i.e. when
 started in batch-mode).</p></div></div><div class="top"><p class="src"><a id="v:orgPromptPrimary" class="def">orgPromptPrimary</a> :: <a href="XMonad-Prompt.html#t:XPConfig" title="XMonad.Prompt">XPConfig</a> -&gt; <a href="XMonad-Config-Prime.html#t:String" title="XMonad.Config.Prime">String</a> -&gt; <a href="XMonad-Config-Prime.html#t:FilePath" title="XMonad.Config.Prime">FilePath</a> -&gt; <a href="XMonad-Config-Prime.html#t:X" title="XMonad.Config.Prime">X</a> () <a href="src/XMonad.Prompt.OrgMode.html#orgPromptPrimary" class="link">Source</a> <a href="#v:orgPromptPrimary" class="selflink">#</a></p><div class="doc"><p>Like <code><a href="XMonad-Prompt-OrgMode.html#v:orgPrompt" title="XMonad.Prompt.OrgMode">orgPrompt</a></code>, but additionally make use of the primary
 selection.  If it is a URL, then use an org-style link
 <code>[[primary-selection][entered message]]</code> as the heading.  Otherwise,
 use the primary selection as the content of the note.</p><p>The prompt will display a little <code>+ PS</code> in the window
 after the type of note.</p></div></div><a href="#g:3" id="g:3"><h1>Types</h1></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:ClipboardSupport" class="def">ClipboardSupport</a> <a href="src/XMonad.Prompt.OrgMode.html#ClipboardSupport" class="link">Source</a> <a href="#t:ClipboardSupport" class="selflink">#</a></p><div class="doc"><p>Whether we should use a clipboard and which one to use.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:PrimarySelection" class="def">PrimarySelection</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:NoClpSupport" class="def">NoClpSupport</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:OrgMode" class="def">OrgMode</a> <a href="src/XMonad.Prompt.OrgMode.html#OrgMode" class="link">Source</a> <a href="#t:OrgMode" class="selflink">#</a></p><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:OrgMode">Instances</h4><details id="i:OrgMode" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:OrgMode:XPrompt:1"></span> <a href="XMonad-Prompt.html#t:XPrompt" title="XMonad.Prompt">XPrompt</a> <a href="XMonad-Prompt-OrgMode.html#t:OrgMode" title="XMonad.Prompt.OrgMode">OrgMode</a></span> <a href="src/XMonad.Prompt.OrgMode.html#line-223" class="link">Source</a> <a href="#t:OrgMode" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:OrgMode:XPrompt:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="XMonad-Prompt-OrgMode.html">XMonad.Prompt.OrgMode</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showXPrompt">showXPrompt</a> :: <a href="XMonad-Prompt-OrgMode.html#t:OrgMode" title="XMonad.Prompt.OrgMode">OrgMode</a> -&gt; <a href="XMonad-Config-Prime.html#t:String" title="XMonad.Config.Prime">String</a> <a href="src/XMonad.Prompt.html#showXPrompt" class="link">Source</a> <a href="#v:showXPrompt" class="selflink">#</a></p><p class="src"><a href="#v:nextCompletion">nextCompletion</a> :: <a href="XMonad-Prompt-OrgMode.html#t:OrgMode" title="XMonad.Prompt.OrgMode">OrgMode</a> -&gt; <a href="XMonad-Config-Prime.html#t:String" title="XMonad.Config.Prime">String</a> -&gt; [<a href="XMonad-Config-Prime.html#t:String" title="XMonad.Config.Prime">String</a>] -&gt; <a href="XMonad-Config-Prime.html#t:String" title="XMonad.Config.Prime">String</a> <a href="src/XMonad.Prompt.html#nextCompletion" class="link">Source</a> <a href="#v:nextCompletion" class="selflink">#</a></p><p class="src"><a href="#v:commandToComplete">commandToComplete</a> :: <a href="XMonad-Prompt-OrgMode.html#t:OrgMode" title="XMonad.Prompt.OrgMode">OrgMode</a> -&gt; <a href="XMonad-Config-Prime.html#t:String" title="XMonad.Config.Prime">String</a> -&gt; <a href="XMonad-Config-Prime.html#t:String" title="XMonad.Config.Prime">String</a> <a href="src/XMonad.Prompt.html#commandToComplete" class="link">Source</a> <a href="#v:commandToComplete" class="selflink">#</a></p><p class="src"><a href="#v:completionToCommand">completionToCommand</a> :: <a href="XMonad-Prompt-OrgMode.html#t:OrgMode" title="XMonad.Prompt.OrgMode">OrgMode</a> -&gt; <a href="XMonad-Config-Prime.html#t:String" title="XMonad.Config.Prime">String</a> -&gt; <a href="XMonad-Config-Prime.html#t:String" title="XMonad.Config.Prime">String</a> <a href="src/XMonad.Prompt.html#completionToCommand" class="link">Source</a> <a href="#v:completionToCommand" class="selflink">#</a></p><p class="src"><a href="#v:completionFunction">completionFunction</a> :: <a href="XMonad-Prompt-OrgMode.html#t:OrgMode" title="XMonad.Prompt.OrgMode">OrgMode</a> -&gt; <a href="XMonad-Prompt.html#t:ComplFunction" title="XMonad.Prompt">ComplFunction</a> <a href="src/XMonad.Prompt.html#completionFunction" class="link">Source</a> <a href="#v:completionFunction" class="selflink">#</a></p><p class="src"><a href="#v:modeAction">modeAction</a> :: <a href="XMonad-Prompt-OrgMode.html#t:OrgMode" title="XMonad.Prompt.OrgMode">OrgMode</a> -&gt; <a href="XMonad-Config-Prime.html#t:String" title="XMonad.Config.Prime">String</a> -&gt; <a href="XMonad-Config-Prime.html#t:String" title="XMonad.Config.Prime">String</a> -&gt; <a href="XMonad-Config-Prime.html#t:X" title="XMonad.Config.Prime">X</a> () <a href="src/XMonad.Prompt.html#modeAction" class="link">Source</a> <a href="#v:modeAction" class="selflink">#</a></p></div></details></td></tr></table></details></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.26.0</p></div></body></html>