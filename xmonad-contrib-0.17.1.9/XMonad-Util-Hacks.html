<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>XMonad.Util.Hacks</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">xmonad-contrib-0.17.1.9: Community-maintained extensions for xmonad</span><ul class="links" id="page-menu"><li><a href="src/XMonad.Util.Hacks.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th valign="top">Copyright</th><td>(c) 2020 Leon Kowarschick</td></tr><tr><th>License</th><td>BSD3-style (see LICENSE)</td></tr><tr><th>Maintainer</th><td>Leon Kowarschick. &lt;thereal.elkowar@gmail.com&gt;</td></tr><tr><th>Stability</th><td>unstable</td></tr><tr><th>Portability</th><td>unportable</td></tr><tr><th>Safe Haskell</th><td>Safe-Inferred</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">XMonad.Util.Hacks</p></div><div id="table-of-contents"><div id="contents-list"><p class="caption" onclick="window.scrollTo(0,0)">Contents</p><ul><li><a href="#g:1">Windowed fullscreen</a></li><li><a href="#g:2">Java Hack</a></li><li><a href="#g:3">Stacking trays (trayer) above panels (xmobar)</a></li><li><a href="#g:4">Inform xmobar when trays (e.g. trayer) change width</a></li></ul></div></div><div id="description"><p class="caption">Description</p><div class="doc"><p>This module is a collection of random fixes, workarounds and other functions
 that rely on somewhat hacky implementations which may have unwanted side effects
 and/or are small enough to not warrant a separate module.</p><p>Import this module as qualified like so:</p><pre>import qualified XMonad.Util.Hacks as Hacks</pre><p>and then use the functions you want as described in their respective documentation.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><a href="#v:windowedFullscreenFixEventHook">windowedFullscreenFixEventHook</a> :: <a href="XMonad-Config-Prime.html#t:Event" title="XMonad.Config.Prime">Event</a> -&gt; <a href="XMonad-Config-Prime.html#t:X" title="XMonad.Config.Prime">X</a> <a href="XMonad-Prelude.html#t:All" title="XMonad.Prelude">All</a></li><li class="src short"><a href="#v:javaHack">javaHack</a> :: <a href="XMonad-Config-Prime.html#t:XConfig" title="XMonad.Config.Prime">XConfig</a> l -&gt; <a href="XMonad-Config-Prime.html#t:XConfig" title="XMonad.Config.Prime">XConfig</a> l</li><li class="src short"><a href="#v:trayerAboveXmobarEventHook">trayerAboveXmobarEventHook</a> :: <a href="XMonad-Config-Prime.html#t:Event" title="XMonad.Config.Prime">Event</a> -&gt; <a href="XMonad-Config-Prime.html#t:X" title="XMonad.Config.Prime">X</a> <a href="XMonad-Prelude.html#t:All" title="XMonad.Prelude">All</a></li><li class="src short"><a href="#v:trayAbovePanelEventHook">trayAbovePanelEventHook</a> :: <a href="XMonad-Config-Prime.html#t:Query" title="XMonad.Config.Prime">Query</a> <a href="XMonad-Prelude.html#t:Bool" title="XMonad.Prelude">Bool</a> -&gt; <a href="XMonad-Config-Prime.html#t:Query" title="XMonad.Config.Prime">Query</a> <a href="XMonad-Prelude.html#t:Bool" title="XMonad.Prelude">Bool</a> -&gt; <a href="XMonad-Config-Prime.html#t:Event" title="XMonad.Config.Prime">Event</a> -&gt; <a href="XMonad-Config-Prime.html#t:X" title="XMonad.Config.Prime">X</a> <a href="XMonad-Prelude.html#t:All" title="XMonad.Prelude">All</a></li><li class="src short"><a href="#v:trayerPaddingXmobarEventHook">trayerPaddingXmobarEventHook</a> :: <a href="XMonad-Config-Prime.html#t:Event" title="XMonad.Config.Prime">Event</a> -&gt; <a href="XMonad-Config-Prime.html#t:X" title="XMonad.Config.Prime">X</a> <a href="XMonad-Prelude.html#t:All" title="XMonad.Prelude">All</a></li><li class="src short"><a href="#v:trayPaddingXmobarEventHook">trayPaddingXmobarEventHook</a> :: <a href="XMonad-Config-Prime.html#t:Query" title="XMonad.Config.Prime">Query</a> <a href="XMonad-Prelude.html#t:Bool" title="XMonad.Prelude">Bool</a> -&gt; <a href="XMonad-Config-Prime.html#t:String" title="XMonad.Config.Prime">String</a> -&gt; <a href="XMonad-Config-Prime.html#t:Event" title="XMonad.Config.Prime">Event</a> -&gt; <a href="XMonad-Config-Prime.html#t:X" title="XMonad.Config.Prime">X</a> <a href="XMonad-Prelude.html#t:All" title="XMonad.Prelude">All</a></li><li class="src short"><a href="#v:trayPaddingEventHook">trayPaddingEventHook</a> :: <a href="XMonad-Config-Prime.html#t:Query" title="XMonad.Config.Prime">Query</a> <a href="XMonad-Prelude.html#t:Bool" title="XMonad.Prelude">Bool</a> -&gt; (<a href="XMonad-Config-Prime.html#t:Int" title="XMonad.Config.Prime">Int</a> -&gt; <a href="XMonad-Config-Prime.html#t:X" title="XMonad.Config.Prime">X</a> ()) -&gt; <a href="XMonad-Config-Prime.html#t:Event" title="XMonad.Config.Prime">Event</a> -&gt; <a href="XMonad-Config-Prime.html#t:X" title="XMonad.Config.Prime">X</a> <a href="XMonad-Prelude.html#t:All" title="XMonad.Prelude">All</a></li></ul></details></div><div id="interface"><a href="#g:1" id="g:1"><h1>Windowed fullscreen</h1></a><div class="doc"><p>Windowed fullscreen describes the behaviour in which XMonad,
 by default, does not automatically put windows that request being fullscreened
 into actual fullscreen, but keeps them constrained
 to their normal window dimensions, still rendering them in fullscreen.</p><p>With chromium based applications like Chrome, Discord and others this
 can cause issues, where the window does not correctly see the size of the window
 when displaying the fullscreen content, thus cutting off the window content.</p><p>This function works around that issue by forcing the window to recalculate their
 dimensions after initiating fullscreen, thus making chrome-based applications
 behave properly when in windowed fullscreen.</p><p>The following gif shows the behaviour of chrome (left) without this fix
 compared to firefox, which already behaves as expected by default:
 <img src="https://user-images.githubusercontent.com/79924233/115355075-e61dd280-a1ec-11eb-81d3-927ca462945f.gif" /></p><p>Using this function, chrome will now behave as expected as well:
 <img src="https://user-images.githubusercontent.com/5300871/99186115-4dbb8780-274e-11eb-9ed2-b7815ba9e597.gif" /></p><p>Usage:
 add to handleEventHook as follows:</p><pre>handleEventHook = handleEventHook def &lt;&gt; Hacks.windowedFullscreenFixEventHook</pre></div><div class="top"><p class="src"><a id="v:windowedFullscreenFixEventHook" class="def">windowedFullscreenFixEventHook</a> :: <a href="XMonad-Config-Prime.html#t:Event" title="XMonad.Config.Prime">Event</a> -&gt; <a href="XMonad-Config-Prime.html#t:X" title="XMonad.Config.Prime">X</a> <a href="XMonad-Prelude.html#t:All" title="XMonad.Prelude">All</a> <a href="src/XMonad.Util.Hacks.html#windowedFullscreenFixEventHook" class="link">Source</a> <a href="#v:windowedFullscreenFixEventHook" class="selflink">#</a></p><div class="doc"><p>Fixes fullscreen behaviour of chromium based apps by quickly applying and undoing a resize.
 This causes chromium to recalculate the fullscreen window
 dimensions to match the actual &quot;windowed fullscreen&quot; dimensions.</p></div></div><a href="#g:2" id="g:2"><h1>Java Hack</h1></a><div class="doc"><p>Some java Applications might not work with xmonad. A common workaround would be to set the environment
 variable <code>_JAVA_AWT_WM_NONREPARENTING</code> to 1. The function <code><a href="XMonad-Util-Hacks.html#v:javaHack" title="XMonad.Util.Hacks">javaHack</a></code> does exactly that.
 Example usage:</p><pre>main = xmonad $ Hacks.javaHack (def {...})</pre></div><div class="top"><p class="src"><a id="v:javaHack" class="def">javaHack</a> :: <a href="XMonad-Config-Prime.html#t:XConfig" title="XMonad.Config.Prime">XConfig</a> l -&gt; <a href="XMonad-Config-Prime.html#t:XConfig" title="XMonad.Config.Prime">XConfig</a> l <a href="src/XMonad.Util.Hacks.html#javaHack" class="link">Source</a> <a href="#v:javaHack" class="selflink">#</a></p><div class="doc"><p>Fixes Java applications that don't work well with xmonad, by setting <code>_JAVA_AWT_WM_NONREPARENTING=1</code></p></div></div><a href="#g:3" id="g:3"><h1>Stacking trays (trayer) above panels (xmobar)</h1></a><div class="doc"><p>Placing <code>trayer</code> on top of <code>xmobar</code> is somewhat tricky:</p><ul><li>they both should be lowered to the bottom of the stacking order to avoid
   overlapping fullscreen windows</li><li>the tray needs to be stacked on top of the panel regardless of which
   happens to start first</li></ul><p><code><a href="XMonad-Util-Hacks.html#v:trayerAboveXmobarEventHook" title="XMonad.Util.Hacks">trayerAboveXmobarEventHook</a></code> (and the more generic
 <code><a href="XMonad-Util-Hacks.html#v:trayAbovePanelEventHook" title="XMonad.Util.Hacks">trayAbovePanelEventHook</a></code>) is an event hook that ensures the latter:
 whenever the tray lowers itself to the bottom of the stack, it checks
 whether there are any panels above it and lowers these again.</p><p>To ensure the former, that is having both <code>trayer</code> and <code>xmobar</code> lower
 themselves, which is a necessary prerequisite for this event hook to
 trigger:</p><ul><li>set <code>lowerOnStart = True</code> and <code>overrideRedirect = True</code> in <code>~/.xmobarrc</code></li><li>pass <code>-l</code> to <code>trayer</code></li></ul><p>Usage:</p><pre>handleEventHook = &#8230; &lt;&gt; Hacks.trayerAboveXmobarEventHook</pre></div><div class="top"><p class="src"><a id="v:trayerAboveXmobarEventHook" class="def">trayerAboveXmobarEventHook</a> :: <a href="XMonad-Config-Prime.html#t:Event" title="XMonad.Config.Prime">Event</a> -&gt; <a href="XMonad-Config-Prime.html#t:X" title="XMonad.Config.Prime">X</a> <a href="XMonad-Prelude.html#t:All" title="XMonad.Prelude">All</a> <a href="src/XMonad.Util.Hacks.html#trayerAboveXmobarEventHook" class="link">Source</a> <a href="#v:trayerAboveXmobarEventHook" class="selflink">#</a></p><div class="doc"><p>Like <code><a href="XMonad-Util-Hacks.html#v:trayAbovePanelEventHook" title="XMonad.Util.Hacks">trayAbovePanelEventHook</a></code>, but specialised for trayer/xmobar.</p></div></div><div class="top"><p class="src"><a id="v:trayAbovePanelEventHook" class="def">trayAbovePanelEventHook</a> <a href="src/XMonad.Util.Hacks.html#trayAbovePanelEventHook" class="link">Source</a> <a href="#v:trayAbovePanelEventHook" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="XMonad-Config-Prime.html#t:Query" title="XMonad.Config.Prime">Query</a> <a href="XMonad-Prelude.html#t:Bool" title="XMonad.Prelude">Bool</a></td><td class="doc"><p>tray</p></td></tr><tr><td class="src">-&gt; <a href="XMonad-Config-Prime.html#t:Query" title="XMonad.Config.Prime">Query</a> <a href="XMonad-Prelude.html#t:Bool" title="XMonad.Prelude">Bool</a></td><td class="doc"><p>panel</p></td></tr><tr><td class="src">-&gt; <a href="XMonad-Config-Prime.html#t:Event" title="XMonad.Config.Prime">Event</a> -&gt; <a href="XMonad-Config-Prime.html#t:X" title="XMonad.Config.Prime">X</a> <a href="XMonad-Prelude.html#t:All" title="XMonad.Prelude">All</a></td><td class="doc"><p>event hook</p></td></tr></table></div><div class="doc"><p>Whenever a tray window lowers itself to the bottom of the stack, look for
 any panels above it and lower these.</p></div></div><a href="#g:4" id="g:4"><h1>Inform xmobar when trays (e.g. trayer) change width</h1></a><div class="doc"><p>Communicating tray (e.g., trayer) resize events to xmobar so that
 padding space may be reserved on xmobar for the tray.</p><p>Basic Usage with trayer:</p><p>First, add the padding hook to your <code>handleEventHook</code> as follows:</p><pre>main = xmonad $ def
{ ...
, handleEventHook = handleEventHook def
                 &lt;&gt; Hacks.trayerPaddingXmobarEventHook
}</pre><p>Then, assuming the tray is placed on the right, update your
 <code>xmobarrc</code> as follows:</p><pre>Config { ...
       , commands = [ ...
                    , Run XPropertyLog &quot;_XMONAD_TRAYPAD&quot;, ... ]
       , template = &quot; ... %_XMONAD_TRAYPAD%&quot;
       }</pre><p>As an example of what happens in this basic usage, consider the
 case where trayer updates to a width of 53 pixels.
 The following property will appear on the root window:</p><pre>_XMONAD_TRAYPAD(UTF8_STRING) = &quot;&lt;hspace=53/&gt;&quot;</pre></div><div class="top"><p class="src"><a id="v:trayerPaddingXmobarEventHook" class="def">trayerPaddingXmobarEventHook</a> <a href="src/XMonad.Util.Hacks.html#trayerPaddingXmobarEventHook" class="link">Source</a> <a href="#v:trayerPaddingXmobarEventHook" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="XMonad-Config-Prime.html#t:Event" title="XMonad.Config.Prime">Event</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="XMonad-Config-Prime.html#t:X" title="XMonad.Config.Prime">X</a> <a href="XMonad-Prelude.html#t:All" title="XMonad.Prelude">All</a></td><td class="doc"><p>event hook</p></td></tr></table></div><div class="doc"><p>A simple trayer/xmobar-specific event hook that watches for trayer window
 resize changes and updates the _XMONAD_TRAYPAD property with xmobar markup
 that leaves a gap for the trayer.</p></div></div><div class="top"><p class="src"><a id="v:trayPaddingXmobarEventHook" class="def">trayPaddingXmobarEventHook</a> <a href="src/XMonad.Util.Hacks.html#trayPaddingXmobarEventHook" class="link">Source</a> <a href="#v:trayPaddingXmobarEventHook" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="XMonad-Config-Prime.html#t:Query" title="XMonad.Config.Prime">Query</a> <a href="XMonad-Prelude.html#t:Bool" title="XMonad.Prelude">Bool</a></td><td class="doc"><p>query to identify the tray window</p></td></tr><tr><td class="src">-&gt; <a href="XMonad-Config-Prime.html#t:String" title="XMonad.Config.Prime">String</a></td><td class="doc"><p><code><a href="XMonad-Hooks-StatusBar.html#v:xmonadPropLog-39-" title="XMonad.Hooks.StatusBar">xmonadPropLog'</a></code> property to use</p></td></tr><tr><td class="src">-&gt; <a href="XMonad-Config-Prime.html#t:Event" title="XMonad.Config.Prime">Event</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="XMonad-Config-Prime.html#t:X" title="XMonad.Config.Prime">X</a> <a href="XMonad-Prelude.html#t:All" title="XMonad.Prelude">All</a></td><td class="doc"><p>resulting event hook</p></td></tr></table></div><div class="doc"><p>A generic version of <code><a href="XMonad-Util-Hacks.html#v:trayerPaddingXmobarEventHook" title="XMonad.Util.Hacks">trayerPaddingXmobarEventHook</a></code> that
 allows the user to specify how to identify a tray window and the property
 to use with <code><a href="XMonad-Hooks-StatusBar.html#v:xmonadPropLog-39-" title="XMonad.Hooks.StatusBar">xmonadPropLog'</a></code>. This is useful for other trays like
 stalonetray and also when space for more than one tray-like window needs to
 be reserved.</p></div></div><div class="top"><p class="src"><a id="v:trayPaddingEventHook" class="def">trayPaddingEventHook</a> <a href="src/XMonad.Util.Hacks.html#trayPaddingEventHook" class="link">Source</a> <a href="#v:trayPaddingEventHook" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="XMonad-Config-Prime.html#t:Query" title="XMonad.Config.Prime">Query</a> <a href="XMonad-Prelude.html#t:Bool" title="XMonad.Prelude">Bool</a></td><td class="doc"><p>query to identify the tray window</p></td></tr><tr><td class="src">-&gt; (<a href="XMonad-Config-Prime.html#t:Int" title="XMonad.Config.Prime">Int</a> -&gt; <a href="XMonad-Config-Prime.html#t:X" title="XMonad.Config.Prime">X</a> ())</td><td class="doc"><p>action to perform when tray width changes</p></td></tr><tr><td class="src">-&gt; <a href="XMonad-Config-Prime.html#t:Event" title="XMonad.Config.Prime">Event</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="XMonad-Config-Prime.html#t:X" title="XMonad.Config.Prime">X</a> <a href="XMonad-Prelude.html#t:All" title="XMonad.Prelude">All</a></td><td class="doc"><p>resulting event hook</p></td></tr></table></div><div class="doc"><p>A fully generic tray resize hook that invokes a callback whenever a
 tray-like window changes width.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.26.0</p></div></body></html>