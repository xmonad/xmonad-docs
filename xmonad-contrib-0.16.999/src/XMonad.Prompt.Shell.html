<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE ScopedTypeVariables #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE NamedFieldPuns      #-}</span><span>
</span><span id="line-3"></span><span class="hs-comment">{- |
Module      :  XMonad.Prompt.Shell
Description :  A shell prompt.
Copyright   :  (C) 2007 Andrea Rossato
License     :  BSD3

Maintainer  :  andrea.rossato@unibz.it
Stability   :  unstable
Portability :  unportable

A shell prompt for XMonad
-}</span><span>
</span><span id="line-15"></span><span>
</span><span id="line-16"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">XMonad.Prompt.Shell</span><span>
</span><span id="line-17"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-comment">-- * Usage</span></span><span>
</span><span id="line-18"></span><span>      </span><span class="annot"><span class="hs-comment">-- $usage</span></span><span>
</span><span id="line-19"></span><span>      </span><span class="annot"><a href="XMonad.Prompt.Shell.html#Shell"><span class="hs-identifier">Shell</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-20"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="XMonad.Prompt.Shell.html#shellPrompt"><span class="hs-identifier">shellPrompt</span></a></span><span>
</span><span id="line-21"></span><span>    </span><span class="annot"><span class="hs-comment">-- ** Variations on shellPrompt</span></span><span>
</span><span id="line-22"></span><span>    </span><span class="annot"><span class="hs-comment">-- $spawns</span></span><span>
</span><span id="line-23"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="XMonad.Prompt.Shell.html#safePrompt"><span class="hs-identifier">safePrompt</span></a></span><span>
</span><span id="line-24"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="XMonad.Prompt.Shell.html#safeDirPrompt"><span class="hs-identifier">safeDirPrompt</span></a></span><span>
</span><span id="line-25"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="XMonad.Prompt.Shell.html#unsafePrompt"><span class="hs-identifier">unsafePrompt</span></a></span><span>
</span><span id="line-26"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="XMonad.Prompt.Shell.html#prompt"><span class="hs-identifier">prompt</span></a></span><span>
</span><span id="line-27"></span><span>
</span><span id="line-28"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Utility functions</span></span><span>
</span><span id="line-29"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="XMonad.Prompt.Shell.html#compgenDirectories"><span class="hs-identifier">compgenDirectories</span></a></span><span>
</span><span id="line-30"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="XMonad.Prompt.Shell.html#compgenFiles"><span class="hs-identifier">compgenFiles</span></a></span><span>
</span><span id="line-31"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="XMonad.Prompt.Shell.html#getCommands"><span class="hs-identifier">getCommands</span></a></span><span>
</span><span id="line-32"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="XMonad.Prompt.Shell.html#getBrowser"><span class="hs-identifier">getBrowser</span></a></span><span>
</span><span id="line-33"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="XMonad.Prompt.Shell.html#getEditor"><span class="hs-identifier">getEditor</span></a></span><span>
</span><span id="line-34"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="XMonad.Prompt.Shell.html#getShellCompl"><span class="hs-identifier">getShellCompl</span></a></span><span>
</span><span id="line-35"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="XMonad.Prompt.Shell.html#getShellCompl%27"><span class="hs-identifier">getShellCompl'</span></a></span><span>
</span><span id="line-36"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="XMonad.Prompt.Shell.html#split"><span class="hs-identifier">split</span></a></span><span>
</span><span id="line-37"></span><span>    </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-38"></span><span>
</span><span id="line-39"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Codec.Binary.UTF8.String</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">encodeString</span></span><span class="hs-special">)</span><span>
</span><span id="line-40"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Control.Exception</span></span><span>        </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">E</span></span><span>
</span><span id="line-41"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.Bifunctor</span></span><span>           </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">bimap</span></span><span class="hs-special">)</span><span>
</span><span id="line-42"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">System.Directory</span></span><span>         </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">getDirectoryContents</span></span><span class="hs-special">)</span><span>
</span><span id="line-43"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">System.Environment</span></span><span>       </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">getEnv</span></span><span class="hs-special">)</span><span>
</span><span id="line-44"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">System.Posix.Files</span></span><span>       </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">getFileStatus</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">isDirectory</span></span><span class="hs-special">)</span><span>
</span><span id="line-45"></span><span>
</span><span id="line-46"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">XMonad</span></span><span>                   </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">config</span></span><span class="hs-special">)</span><span>
</span><span id="line-47"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="XMonad.Prelude.html"><span class="hs-identifier">XMonad.Prelude</span></a></span><span>
</span><span id="line-48"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="XMonad.Prompt.html"><span class="hs-identifier">XMonad.Prompt</span></a></span><span>
</span><span id="line-49"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="XMonad.Util.Run.html"><span class="hs-identifier">XMonad.Util.Run</span></a></span><span>
</span><span id="line-50"></span><span>
</span><span id="line-51"></span><span id="local-6989586621679390599"><span id="local-6989586621679390600"><span class="annot"><a href="XMonad.Prompt.Shell.html#econst"><span class="hs-identifier hs-type">econst</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621679390600"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679390599"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IOException</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679390600"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679390599"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-52"></span><span id="econst"><span class="annot"><span class="annottext">econst :: a -&gt; IOException -&gt; m a
</span><a href="XMonad.Prompt.Shell.html#econst"><span class="hs-identifier hs-var hs-var">econst</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">m a -&gt; IOException -&gt; m a
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="annot"><span class="annottext">(m a -&gt; IOException -&gt; m a)
-&gt; (a -&gt; m a) -&gt; a -&gt; IOException -&gt; m a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; m a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span>
</span><span id="line-53"></span><span>
</span><span id="line-54"></span><span class="hs-comment">{- $usage
1. In your @~\/.xmonad\/xmonad.hs@:

&gt; import XMonad.Prompt
&gt; import XMonad.Prompt.Shell

2. In your keybindings add something like:

&gt;   , ((modm .|. controlMask, xK_x), shellPrompt def)

For detailed instruction on editing the key binding see
&quot;XMonad.Doc.Extending#Editing_key_bindings&quot;. -}</span><span>
</span><span id="line-66"></span><span>
</span><span id="line-67"></span><span class="hs-keyword">data</span><span> </span><span id="Shell"><span class="annot"><a href="XMonad.Prompt.Shell.html#Shell"><span class="hs-identifier hs-var">Shell</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Shell"><span class="annot"><a href="XMonad.Prompt.Shell.html#Shell"><span class="hs-identifier hs-var">Shell</span></a></span></span><span>
</span><span id="line-68"></span><span class="hs-keyword">type</span><span> </span><span id="Predicate"><span class="annot"><a href="XMonad.Prompt.Shell.html#Predicate"><span class="hs-identifier hs-var">Predicate</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-69"></span><span>
</span><span id="line-70"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679390553"><span id="local-6989586621679390555"><span id="local-6989586621679390558"><span id="local-6989586621679390560"><span class="annot"><a href="XMonad.Prompt.html#XPrompt"><span class="hs-identifier hs-type">XPrompt</span></a></span><span> </span><span class="annot"><a href="XMonad.Prompt.Shell.html#Shell"><span class="hs-identifier hs-type">Shell</span></a></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-71"></span><span>    </span><span id="local-6989586621679390551"><span class="annot"><span class="annottext">showXPrompt :: Shell -&gt; String
</span><a href="XMonad.Prompt.html#showXPrompt"><span class="hs-identifier hs-var hs-var hs-var hs-var">showXPrompt</span></a></span></span><span> </span><span class="annot"><span class="annottext">Shell
</span><a href="XMonad.Prompt.Shell.html#Shell"><span class="hs-identifier hs-var">Shell</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Run: &quot;</span></span><span>
</span><span id="line-72"></span><span>    </span><span id="local-6989586621679390549"><span class="annot"><span class="annottext">completionToCommand :: Shell -&gt; String -&gt; String
</span><a href="XMonad.Prompt.html#completionToCommand"><span class="hs-identifier hs-var hs-var hs-var hs-var">completionToCommand</span></a></span></span><span> </span><span class="annot"><span class="annottext">Shell
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; String
</span><a href="XMonad.Prompt.Shell.html#escape"><span class="hs-identifier hs-var">escape</span></a></span><span>
</span><span id="line-73"></span><span>
</span><span id="line-74"></span><span class="annot"><a href="XMonad.Prompt.Shell.html#shellPrompt"><span class="hs-identifier hs-type">shellPrompt</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="XMonad.Prompt.html#XPConfig"><span class="hs-identifier hs-type">XPConfig</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">X</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-75"></span><span id="shellPrompt"><span class="annot"><span class="annottext">shellPrompt :: XPConfig -&gt; X ()
</span><a href="XMonad.Prompt.Shell.html#shellPrompt"><span class="hs-identifier hs-var hs-var">shellPrompt</span></a></span></span><span> </span><span id="local-6989586621679390546"><span class="annot"><span class="annottext">XPConfig
</span><a href="#local-6989586621679390546"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-76"></span><span>    </span><span id="local-6989586621679390545"><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679390545"><span class="hs-identifier hs-var">cmds</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO [String] -&gt; X [String]
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">io</span></span><span> </span><span class="annot"><span class="annottext">IO [String]
</span><a href="XMonad.Prompt.Shell.html#getCommands"><span class="hs-identifier hs-var">getCommands</span></a></span><span>
</span><span id="line-77"></span><span>    </span><span class="annot"><span class="annottext">Shell -&gt; XPConfig -&gt; ComplFunction -&gt; (String -&gt; X ()) -&gt; X ()
forall p.
XPrompt p =&gt;
p -&gt; XPConfig -&gt; ComplFunction -&gt; (String -&gt; X ()) -&gt; X ()
</span><a href="XMonad.Prompt.html#mkXPrompt"><span class="hs-identifier hs-var">mkXPrompt</span></a></span><span> </span><span class="annot"><span class="annottext">Shell
</span><a href="XMonad.Prompt.Shell.html#Shell"><span class="hs-identifier hs-var">Shell</span></a></span><span> </span><span class="annot"><span class="annottext">XPConfig
</span><a href="#local-6989586621679390546"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[String] -&gt; Predicate -&gt; ComplFunction
</span><a href="XMonad.Prompt.Shell.html#getShellCompl"><span class="hs-identifier hs-var">getShellCompl</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679390545"><span class="hs-identifier hs-var">cmds</span></a></span><span> </span><span class="annot"><span class="annottext">(Predicate -&gt; ComplFunction) -&gt; Predicate -&gt; ComplFunction
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">XPConfig -&gt; Predicate
</span><a href="XMonad.Prompt.html#searchPredicate"><span class="hs-identifier hs-var hs-var">searchPredicate</span></a></span><span> </span><span class="annot"><span class="annottext">XPConfig
</span><a href="#local-6989586621679390546"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">String -&gt; X ()
forall (m :: * -&gt; *). MonadIO m =&gt; String -&gt; m ()
</span><span class="hs-identifier hs-var">spawn</span></span><span>
</span><span id="line-78"></span><span>
</span><span id="line-79"></span><span class="hs-comment">{- $spawns
    See safe and unsafeSpawn in &quot;XMonad.Util.Run&quot;.
    prompt is an alias for unsafePrompt;
    safePrompt and unsafePrompt work on the same principles, but will use
    XPrompt to interactively query the user for input; the appearance is
    set by passing an XPConfig as the second argument. The first argument
    is the program to be run with the interactive input.
    You would use these like this:

    &gt;     , ((modm,               xK_b), safePrompt &quot;firefox&quot; greenXPConfig)
    &gt;     , ((modm .|. shiftMask, xK_c), prompt (&quot;xterm&quot; ++ &quot; -e&quot;) greenXPConfig)

    Note that you want to use safePrompt for Firefox input, as Firefox
    wants URLs, and unsafePrompt for the XTerm example because this allows
    you to easily start a terminal executing an arbitrary command, like
    'top'. -}</span><span>
</span><span id="line-95"></span><span>
</span><span id="line-96"></span><span class="annot"><a href="XMonad.Prompt.Shell.html#prompt"><span class="hs-identifier hs-type">prompt</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="XMonad.Prompt.Shell.html#unsafePrompt"><span class="hs-identifier hs-type">unsafePrompt</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="XMonad.Prompt.Shell.html#safePrompt"><span class="hs-identifier hs-type">safePrompt</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FilePath</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="XMonad.Prompt.html#XPConfig"><span class="hs-identifier hs-type">XPConfig</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">X</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-97"></span><span id="prompt"><span class="annot"><span class="annottext">prompt :: String -&gt; XPConfig -&gt; X ()
</span><a href="XMonad.Prompt.Shell.html#prompt"><span class="hs-identifier hs-var hs-var">prompt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; XPConfig -&gt; X ()
</span><a href="XMonad.Prompt.Shell.html#unsafePrompt"><span class="hs-identifier hs-var">unsafePrompt</span></a></span><span>
</span><span id="line-98"></span><span id="safePrompt"><span class="annot"><span class="annottext">safePrompt :: String -&gt; XPConfig -&gt; X ()
</span><a href="XMonad.Prompt.Shell.html#safePrompt"><span class="hs-identifier hs-var hs-var">safePrompt</span></a></span></span><span> </span><span id="local-6989586621679390539"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679390539"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span id="local-6989586621679390538"><span class="annot"><span class="annottext">XPConfig
</span><a href="#local-6989586621679390538"><span class="hs-identifier hs-var">config</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Shell -&gt; XPConfig -&gt; ComplFunction -&gt; (String -&gt; X ()) -&gt; X ()
forall p.
XPrompt p =&gt;
p -&gt; XPConfig -&gt; ComplFunction -&gt; (String -&gt; X ()) -&gt; X ()
</span><a href="XMonad.Prompt.html#mkXPrompt"><span class="hs-identifier hs-var">mkXPrompt</span></a></span><span> </span><span class="annot"><span class="annottext">Shell
</span><a href="XMonad.Prompt.Shell.html#Shell"><span class="hs-identifier hs-var">Shell</span></a></span><span> </span><span class="annot"><span class="annottext">XPConfig
</span><a href="#local-6989586621679390538"><span class="hs-identifier hs-var">config</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[String] -&gt; Predicate -&gt; ComplFunction
</span><a href="XMonad.Prompt.Shell.html#getShellCompl"><span class="hs-identifier hs-var">getShellCompl</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679390539"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">(Predicate -&gt; ComplFunction) -&gt; Predicate -&gt; ComplFunction
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">XPConfig -&gt; Predicate
</span><a href="XMonad.Prompt.html#searchPredicate"><span class="hs-identifier hs-var hs-var">searchPredicate</span></a></span><span> </span><span class="annot"><span class="annottext">XPConfig
</span><a href="#local-6989586621679390538"><span class="hs-identifier hs-var">config</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">String -&gt; X ()
</span><a href="#local-6989586621679390537"><span class="hs-identifier hs-var">run</span></a></span><span>
</span><span id="line-99"></span><span>    </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621679390537"><span class="annot"><span class="annottext">run :: String -&gt; X ()
</span><a href="#local-6989586621679390537"><span class="hs-identifier hs-var hs-var">run</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; [String] -&gt; X ()
forall (m :: * -&gt; *). MonadIO m =&gt; String -&gt; [String] -&gt; m ()
</span><a href="XMonad.Util.Run.html#safeSpawn"><span class="hs-identifier hs-var">safeSpawn</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679390539"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">([String] -&gt; X ()) -&gt; (String -&gt; [String]) -&gt; String -&gt; X ()
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; [String]
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span>
</span><span id="line-100"></span><span id="unsafePrompt"><span class="annot"><span class="annottext">unsafePrompt :: String -&gt; XPConfig -&gt; X ()
</span><a href="XMonad.Prompt.Shell.html#unsafePrompt"><span class="hs-identifier hs-var hs-var">unsafePrompt</span></a></span></span><span> </span><span id="local-6989586621679390535"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679390535"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span id="local-6989586621679390534"><span class="annot"><span class="annottext">XPConfig
</span><a href="#local-6989586621679390534"><span class="hs-identifier hs-var">config</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Shell -&gt; XPConfig -&gt; ComplFunction -&gt; (String -&gt; X ()) -&gt; X ()
forall p.
XPrompt p =&gt;
p -&gt; XPConfig -&gt; ComplFunction -&gt; (String -&gt; X ()) -&gt; X ()
</span><a href="XMonad.Prompt.html#mkXPrompt"><span class="hs-identifier hs-var">mkXPrompt</span></a></span><span> </span><span class="annot"><span class="annottext">Shell
</span><a href="XMonad.Prompt.Shell.html#Shell"><span class="hs-identifier hs-var">Shell</span></a></span><span> </span><span class="annot"><span class="annottext">XPConfig
</span><a href="#local-6989586621679390534"><span class="hs-identifier hs-var">config</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[String] -&gt; Predicate -&gt; ComplFunction
</span><a href="XMonad.Prompt.Shell.html#getShellCompl"><span class="hs-identifier hs-var">getShellCompl</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679390535"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">(Predicate -&gt; ComplFunction) -&gt; Predicate -&gt; ComplFunction
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">XPConfig -&gt; Predicate
</span><a href="XMonad.Prompt.html#searchPredicate"><span class="hs-identifier hs-var hs-var">searchPredicate</span></a></span><span> </span><span class="annot"><span class="annottext">XPConfig
</span><a href="#local-6989586621679390534"><span class="hs-identifier hs-var">config</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">String -&gt; X ()
forall (m :: * -&gt; *). MonadIO m =&gt; String -&gt; m ()
</span><a href="#local-6989586621679390533"><span class="hs-identifier hs-var">run</span></a></span><span>
</span><span id="line-101"></span><span>    </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621679390533"><span class="annot"><span class="annottext">run :: String -&gt; m ()
</span><a href="#local-6989586621679390533"><span class="hs-identifier hs-var hs-var">run</span></a></span></span><span> </span><span id="local-6989586621679390532"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679390532"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; m ()
forall (m :: * -&gt; *). MonadIO m =&gt; String -&gt; m ()
</span><a href="XMonad.Util.Run.html#unsafeSpawn"><span class="hs-identifier hs-var">unsafeSpawn</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; m ()) -&gt; String -&gt; m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679390535"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679390532"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-102"></span><span>
</span><span id="line-103"></span><span class="hs-comment">{- | Like 'safePrompt', but optimized for the use-case of a program that
needs a file as an argument.

For example, a prompt for &lt;https://github.com/mwh/dragon dragon&gt; that
always starts searching in your home directory would look like

&gt; safeDirPrompt &quot;dragon&quot; def &quot;~/&quot;

This is especially useful when using something like
'XMonad.Prompt.FuzzyMatch.fuzzyMatch' from &quot;XMonad.Prompt.FuzzyMatch&quot; as
your prompt's @searchPredicate@.
-}</span><span>
</span><span id="line-115"></span><span class="annot"><a href="XMonad.Prompt.Shell.html#safeDirPrompt"><span class="hs-identifier hs-type">safeDirPrompt</span></a></span><span>
</span><span id="line-116"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FilePath</span></span><span>  </span><span class="hs-comment">-- ^ The command to execute</span><span>
</span><span id="line-117"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="XMonad.Prompt.html#XPConfig"><span class="hs-identifier hs-type">XPConfig</span></a></span><span>  </span><span class="hs-comment">-- ^ The prompt configuration</span><span>
</span><span id="line-118"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span>    </span><span class="hs-comment">-- ^ Which string to start @compgen@ with</span><span>
</span><span id="line-119"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">X</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-120"></span><span id="safeDirPrompt"><span class="annot"><span class="annottext">safeDirPrompt :: String -&gt; XPConfig -&gt; String -&gt; X ()
</span><a href="XMonad.Prompt.Shell.html#safeDirPrompt"><span class="hs-identifier hs-var hs-var">safeDirPrompt</span></a></span></span><span> </span><span id="local-6989586621679390530"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679390530"><span class="hs-identifier hs-var">cmd</span></a></span></span><span> </span><span id="local-6989586621679390529"><span class="annot"><span class="annottext">cfg :: XPConfig
</span><a href="#local-6989586621679390529"><span class="hs-identifier hs-var">cfg</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="XMonad.Prompt.html#XPC"><span class="hs-identifier hs-type">XPC</span></a></span><span class="hs-special">{</span><span> </span><span id="local-6989586621679390527"><span class="annot"><span class="annottext">Predicate
searchPredicate :: Predicate
searchPredicate :: XPConfig -&gt; Predicate
</span><a href="#local-6989586621679390527"><span class="hs-identifier hs-var hs-var">searchPredicate</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span id="local-6989586621679390526"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679390526"><span class="hs-identifier hs-var">compgenStr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-121"></span><span>    </span><span class="annot"><span class="annottext">Shell -&gt; XPConfig -&gt; ComplFunction -&gt; (String -&gt; X ()) -&gt; X ()
forall p.
XPrompt p =&gt;
p -&gt; XPConfig -&gt; ComplFunction -&gt; (String -&gt; X ()) -&gt; X ()
</span><a href="XMonad.Prompt.html#mkXPrompt"><span class="hs-identifier hs-var">mkXPrompt</span></a></span><span> </span><span class="annot"><span class="annottext">Shell
</span><a href="XMonad.Prompt.Shell.html#Shell"><span class="hs-identifier hs-var">Shell</span></a></span><span> </span><span class="annot"><span class="annottext">XPConfig
</span><a href="#local-6989586621679390529"><span class="hs-identifier hs-var">cfg</span></a></span><span> </span><span class="annot"><span class="annottext">ComplFunction
</span><a href="#local-6989586621679390525"><span class="hs-identifier hs-var">mkCompl</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; [String] -&gt; X ()
forall (m :: * -&gt; *). MonadIO m =&gt; String -&gt; [String] -&gt; m ()
</span><a href="XMonad.Util.Run.html#safeSpawn"><span class="hs-identifier hs-var">safeSpawn</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679390530"><span class="hs-identifier hs-var">cmd</span></a></span><span> </span><span class="annot"><span class="annottext">([String] -&gt; X ()) -&gt; (String -&gt; [String]) -&gt; String -&gt; X ()
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; [String]
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span class="hs-special">)</span><span>
</span><span id="line-122"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-123"></span><span>    </span><span class="annot"><a href="#local-6989586621679390525"><span class="hs-identifier hs-type">mkCompl</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">]</span><span>
</span><span id="line-124"></span><span>    </span><span id="local-6989586621679390525"><span class="annot"><span class="annottext">mkCompl :: ComplFunction
</span><a href="#local-6989586621679390525"><span class="hs-identifier hs-var hs-var">mkCompl</span></a></span></span><span> </span><span id="local-6989586621679390524"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679390524"><span class="hs-identifier hs-var">input</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-125"></span><span>        </span><span class="annot"><span class="annottext">ComplCaseSensitivity
-&gt; ([String] -&gt; [String]) -&gt; [String] -&gt; String -&gt; ComplFunction
</span><a href="XMonad.Prompt.Shell.html#shellComplImpl"><span class="hs-identifier hs-var">shellComplImpl</span></a></span><span>
</span><span id="line-126"></span><span>            </span><span class="annot"><span class="annottext">ComplCaseSensitivity
</span><a href="XMonad.Prompt.html#CaseSensitive"><span class="hs-identifier hs-var">CaseSensitive</span></a></span><span>
</span><span id="line-127"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(String -&gt; Bool) -&gt; [String] -&gt; [String]
forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">filter</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Predicate
</span><a href="#local-6989586621679390527"><span class="hs-identifier hs-var">searchPredicate</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679390521"><span class="hs-identifier hs-var">ext</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-128"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[String] -&gt; Predicate -&gt; String -&gt; [String]
</span><a href="XMonad.Prompt.Shell.html#commandCompletionFunction"><span class="hs-identifier hs-var">commandCompletionFunction</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679390530"><span class="hs-identifier hs-var">cmd</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">Predicate
</span><a href="#local-6989586621679390527"><span class="hs-identifier hs-var">searchPredicate</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679390524"><span class="hs-identifier hs-var">input</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-129"></span><span>            </span><span class="hs-special">(</span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;/&quot;</span></span><span> </span><span class="annot"><span class="annottext">Predicate
forall a. Eq a =&gt; [a] -&gt; [a] -&gt; Bool
</span><span class="hs-operator hs-var">`isInfixOf`</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679390524"><span class="hs-identifier hs-var">input</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679390518"><span class="hs-identifier hs-var">dir</span></a></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679390526"><span class="hs-identifier hs-var">compgenStr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-130"></span><span>            </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679390524"><span class="hs-identifier hs-var">input</span></a></span><span>
</span><span id="line-131"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-132"></span><span>        </span><span class="hs-comment">-- &quot;/path/to/some/file&quot; &#8658; (&quot;file&quot;, &quot;/path/to/some/&quot;)</span><span>
</span><span id="line-133"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621679390521"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679390521"><span class="hs-identifier hs-var">ext</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679390518"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679390518"><span class="hs-identifier hs-var">dir</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">)</span><span>
</span><span id="line-134"></span><span>            </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(String -&gt; String)
-&gt; (String -&gt; String) -&gt; (String, String) -&gt; (String, String)
forall (p :: * -&gt; * -&gt; *) a b c d.
Bifunctor p =&gt;
(a -&gt; b) -&gt; (c -&gt; d) -&gt; p a c -&gt; p b d
</span><span class="hs-identifier hs-var">bimap</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String
forall a. [a] -&gt; [a]
</span><span class="hs-identifier hs-var">reverse</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String
forall a. [a] -&gt; [a]
</span><span class="hs-identifier hs-var">reverse</span></span><span> </span><span class="annot"><span class="annottext">((String, String) -&gt; (String, String))
-&gt; (String -&gt; (String, String)) -&gt; String -&gt; (String, String)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Char -&gt; Bool) -&gt; String -&gt; (String, String)
forall a. (a -&gt; Bool) -&gt; [a] -&gt; ([a], [a])
</span><span class="hs-identifier hs-var">break</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Char -&gt; Char -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'/'</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(String -&gt; (String, String))
-&gt; (String -&gt; String) -&gt; String -&gt; (String, String)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String
forall a. [a] -&gt; [a]
</span><span class="hs-identifier hs-var">reverse</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; (String, String)) -&gt; String -&gt; (String, String)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679390524"><span class="hs-identifier hs-var">input</span></a></span><span>
</span><span id="line-135"></span><span>
</span><span id="line-136"></span><span class="annot"><a href="XMonad.Prompt.Shell.html#getShellCompl"><span class="hs-identifier hs-type">getShellCompl</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="XMonad.Prompt.Shell.html#Predicate"><span class="hs-identifier hs-type">Predicate</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">]</span><span>
</span><span id="line-137"></span><span id="getShellCompl"><span class="annot"><span class="annottext">getShellCompl :: [String] -&gt; Predicate -&gt; ComplFunction
</span><a href="XMonad.Prompt.Shell.html#getShellCompl"><span class="hs-identifier hs-var hs-var">getShellCompl</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ComplCaseSensitivity -&gt; [String] -&gt; Predicate -&gt; ComplFunction
</span><a href="XMonad.Prompt.Shell.html#getShellCompl%27"><span class="hs-identifier hs-var">getShellCompl'</span></a></span><span> </span><span class="annot"><span class="annottext">ComplCaseSensitivity
</span><a href="XMonad.Prompt.html#CaseSensitive"><span class="hs-identifier hs-var">CaseSensitive</span></a></span><span>
</span><span id="line-138"></span><span>
</span><span id="line-139"></span><span class="annot"><a href="XMonad.Prompt.Shell.html#getShellCompl%27"><span class="hs-identifier hs-type">getShellCompl'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="XMonad.Prompt.html#ComplCaseSensitivity"><span class="hs-identifier hs-type">ComplCaseSensitivity</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="XMonad.Prompt.Shell.html#Predicate"><span class="hs-identifier hs-type">Predicate</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">]</span><span>
</span><span id="line-140"></span><span id="getShellCompl%27"><span class="annot"><span class="annottext">getShellCompl' :: ComplCaseSensitivity -&gt; [String] -&gt; Predicate -&gt; ComplFunction
</span><a href="XMonad.Prompt.Shell.html#getShellCompl%27"><span class="hs-identifier hs-var hs-var">getShellCompl'</span></a></span></span><span> </span><span id="local-6989586621679390515"><span class="annot"><span class="annottext">ComplCaseSensitivity
</span><a href="#local-6989586621679390515"><span class="hs-identifier hs-var">csn</span></a></span></span><span> </span><span id="local-6989586621679390514"><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679390514"><span class="hs-identifier hs-var">cmds</span></a></span></span><span> </span><span id="local-6989586621679390513"><span class="annot"><span class="annottext">Predicate
</span><a href="#local-6989586621679390513"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span id="local-6989586621679390512"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679390512"><span class="hs-identifier hs-var">input</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-141"></span><span>    </span><span class="annot"><span class="annottext">ComplCaseSensitivity
-&gt; ([String] -&gt; [String]) -&gt; [String] -&gt; String -&gt; ComplFunction
</span><a href="XMonad.Prompt.Shell.html#shellComplImpl"><span class="hs-identifier hs-var">shellComplImpl</span></a></span><span> </span><span class="annot"><span class="annottext">ComplCaseSensitivity
</span><a href="#local-6989586621679390515"><span class="hs-identifier hs-var">csn</span></a></span><span> </span><span class="annot"><span class="annottext">[String] -&gt; [String]
forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[String] -&gt; Predicate -&gt; String -&gt; [String]
</span><a href="XMonad.Prompt.Shell.html#commandCompletionFunction"><span class="hs-identifier hs-var">commandCompletionFunction</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679390514"><span class="hs-identifier hs-var">cmds</span></a></span><span> </span><span class="annot"><span class="annottext">Predicate
</span><a href="#local-6989586621679390513"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679390512"><span class="hs-identifier hs-var">input</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679390512"><span class="hs-identifier hs-var">input</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679390512"><span class="hs-identifier hs-var">input</span></a></span><span>
</span><span id="line-142"></span><span>
</span><span id="line-143"></span><span class="hs-comment">-- | Based in the user input and the given filtering function, create</span><span>
</span><span id="line-144"></span><span class="hs-comment">-- the completion string to show in the prompt.</span><span>
</span><span id="line-145"></span><span class="annot"><a href="XMonad.Prompt.Shell.html#shellComplImpl"><span class="hs-identifier hs-type">shellComplImpl</span></a></span><span>
</span><span id="line-146"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="XMonad.Prompt.html#ComplCaseSensitivity"><span class="hs-identifier hs-type">ComplCaseSensitivity</span></a></span><span>    </span><span class="hs-comment">-- ^ Whether the @compgen@ query should be case sensitive</span><span>
</span><span id="line-147"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">]</span><span class="hs-special">)</span><span>  </span><span class="hs-comment">-- ^ How to filter the files we get back</span><span>
</span><span id="line-148"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">]</span><span>                </span><span class="hs-comment">-- ^ The available commands to suggest</span><span>
</span><span id="line-149"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span>                  </span><span class="hs-comment">-- ^ Which string to give to @compgen@</span><span>
</span><span id="line-150"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span>                  </span><span class="hs-comment">-- ^ The input string</span><span>
</span><span id="line-151"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">]</span><span>
</span><span id="line-152"></span><span id="shellComplImpl"><span class="annot"><span class="annottext">shellComplImpl :: ComplCaseSensitivity
-&gt; ([String] -&gt; [String]) -&gt; [String] -&gt; String -&gt; ComplFunction
</span><a href="XMonad.Prompt.Shell.html#shellComplImpl"><span class="hs-identifier hs-var hs-var">shellComplImpl</span></a></span></span><span> </span><span id="local-6989586621679390510"><span class="annot"><span class="annottext">ComplCaseSensitivity
</span><a href="#local-6989586621679390510"><span class="hs-identifier hs-var">csn</span></a></span></span><span> </span><span id="local-6989586621679390509"><span class="annot"><span class="annottext">[String] -&gt; [String]
</span><a href="#local-6989586621679390509"><span class="hs-identifier hs-var">filterFiles</span></a></span></span><span> </span><span id="local-6989586621679390508"><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679390508"><span class="hs-identifier hs-var">cmds</span></a></span></span><span> </span><span id="local-6989586621679390507"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679390507"><span class="hs-identifier hs-var">cmpgenStr</span></a></span></span><span> </span><span id="local-6989586621679390506"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679390506"><span class="hs-identifier hs-var">input</span></a></span></span><span>
</span><span id="line-153"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679390506"><span class="hs-identifier hs-var">input</span></a></span><span> </span><span class="annot"><span class="annottext">Predicate
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;&quot;</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Char
forall a. [a] -&gt; a
</span><span class="hs-identifier hs-var">last</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679390506"><span class="hs-identifier hs-var">input</span></a></span><span> </span><span class="annot"><span class="annottext">Char -&gt; Char -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">' '</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[String] -&gt; IO [String]
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-154"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-155"></span><span>        </span><span id="local-6989586621679390503"><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679390503"><span class="hs-identifier hs-var">choices</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[String] -&gt; [String]
</span><a href="#local-6989586621679390509"><span class="hs-identifier hs-var">filterFiles</span></a></span><span> </span><span class="annot"><span class="annottext">([String] -&gt; [String])
-&gt; (String -&gt; [String]) -&gt; String -&gt; [String]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; [String]
</span><span class="hs-identifier hs-var">lines</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; [String]) -&gt; IO String -&gt; IO [String]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ComplCaseSensitivity -&gt; String -&gt; IO String
</span><a href="XMonad.Prompt.Shell.html#compgenFiles"><span class="hs-identifier hs-var">compgenFiles</span></a></span><span> </span><span class="annot"><span class="annottext">ComplCaseSensitivity
</span><a href="#local-6989586621679390510"><span class="hs-identifier hs-var">csn</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679390507"><span class="hs-identifier hs-var">cmpgenStr</span></a></span><span>
</span><span id="line-156"></span><span>        </span><span id="local-6989586621679390500"><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679390500"><span class="hs-identifier hs-var">files</span></a></span></span><span>   </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679390503"><span class="hs-identifier hs-var">choices</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-157"></span><span>            </span><span class="hs-special">[</span><span id="local-6989586621679390499"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679390499"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621679390498"><span class="annot"><span class="annottext">FileStatus
</span><a href="#local-6989586621679390498"><span class="hs-identifier hs-var">fs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">String -&gt; IO FileStatus
</span><span class="hs-identifier hs-var">getFileStatus</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; String
</span><span class="hs-identifier hs-var">encodeString</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679390499"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-158"></span><span>                      </span><span class="annot"><span class="annottext">[String] -&gt; IO [String]
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">([String] -&gt; IO [String]) -&gt; [String] -&gt; IO [String]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">FileStatus -&gt; Bool
</span><span class="hs-identifier hs-var">isDirectory</span></span><span> </span><span class="annot"><span class="annottext">FileStatus
</span><a href="#local-6989586621679390498"><span class="hs-identifier hs-var">fs</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679390499"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;/&quot;</span></span><span class="hs-special">]</span><span> </span><span class="hs-keyword">else</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679390499"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-159"></span><span>            </span><span class="annot"><span class="annottext">[String]
</span><span class="hs-identifier">_</span></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[String] -&gt; IO [String]
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679390503"><span class="hs-identifier hs-var">choices</span></a></span><span>
</span><span id="line-160"></span><span>        </span><span class="annot"><span class="annottext">[String] -&gt; IO [String]
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">([String] -&gt; IO [String])
-&gt; ([String] -&gt; [String]) -&gt; [String] -&gt; IO [String]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; String -&gt; Ordering) -&gt; [String] -&gt; [String]
forall a. (a -&gt; a -&gt; Ordering) -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">sortBy</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; Ordering
</span><a href="#local-6989586621679390496"><span class="hs-identifier hs-var">typedFirst</span></a></span><span> </span><span class="annot"><span class="annottext">([String] -&gt; [String])
-&gt; ([String] -&gt; [String]) -&gt; [String] -&gt; [String]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">[String] -&gt; [String]
forall a. Ord a =&gt; [a] -&gt; [a]
</span><a href="XMonad.Prompt.html#uniqSort"><span class="hs-identifier hs-var">uniqSort</span></a></span><span> </span><span class="annot"><span class="annottext">([String] -&gt; IO [String]) -&gt; [String] -&gt; IO [String]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679390500"><span class="hs-identifier hs-var">files</span></a></span><span> </span><span class="annot"><span class="annottext">[String] -&gt; [String] -&gt; [String]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679390508"><span class="hs-identifier hs-var">cmds</span></a></span><span>
</span><span id="line-161"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-162"></span><span>    </span><span class="annot"><a href="#local-6989586621679390496"><span class="hs-identifier hs-type">typedFirst</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ordering</span></span><span>
</span><span id="line-163"></span><span>    </span><span id="local-6989586621679390496"><span class="annot"><span class="annottext">typedFirst :: String -&gt; String -&gt; Ordering
</span><a href="#local-6989586621679390496"><span class="hs-identifier hs-var hs-var">typedFirst</span></a></span></span><span> </span><span id="local-6989586621679390494"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679390494"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679390493"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679390493"><span class="hs-identifier hs-var">y</span></a></span></span><span>
</span><span id="line-164"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679390494"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Predicate
</span><a href="#local-6989586621679390492"><span class="hs-operator hs-var">`startsWith`</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679390506"><span class="hs-identifier hs-var">input</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679390493"><span class="hs-identifier hs-var">y</span></a></span><span> </span><span class="annot"><span class="annottext">Predicate
</span><a href="#local-6989586621679390492"><span class="hs-operator hs-var">`startsWith`</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679390506"><span class="hs-identifier hs-var">input</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">LT</span></span><span>
</span><span id="line-165"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679390493"><span class="hs-identifier hs-var">y</span></a></span><span> </span><span class="annot"><span class="annottext">Predicate
</span><a href="#local-6989586621679390492"><span class="hs-operator hs-var">`startsWith`</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679390506"><span class="hs-identifier hs-var">input</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679390494"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Predicate
</span><a href="#local-6989586621679390492"><span class="hs-operator hs-var">`startsWith`</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679390506"><span class="hs-identifier hs-var">input</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">GT</span></span><span>
</span><span id="line-166"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679390494"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; Ordering
forall a. Ord a =&gt; a -&gt; a -&gt; Ordering
</span><span class="hs-operator hs-var">`compare`</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679390493"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-167"></span><span>
</span><span id="line-168"></span><span>    </span><span class="annot"><a href="#local-6989586621679390492"><span class="hs-identifier hs-type">startsWith</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-169"></span><span>    </span><span id="local-6989586621679390492"><span class="annot"><span class="annottext">startsWith :: Predicate
</span><a href="#local-6989586621679390492"><span class="hs-identifier hs-var hs-var">startsWith</span></a></span></span><span> </span><span id="local-6989586621679390488"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679390488"><span class="hs-identifier hs-var">str</span></a></span></span><span> </span><span id="local-6989586621679390487"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679390487"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Char -&gt; Char) -&gt; String -&gt; String
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">Char -&gt; Char
</span><span class="hs-identifier hs-var">toLower</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679390487"><span class="hs-identifier hs-var">ps</span></a></span><span> </span><span class="annot"><span class="annottext">Predicate
forall a. Eq a =&gt; [a] -&gt; [a] -&gt; Bool
</span><span class="hs-operator hs-var">`isPrefixOf`</span></span><span> </span><span class="annot"><span class="annottext">(Char -&gt; Char) -&gt; String -&gt; String
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">Char -&gt; Char
</span><span class="hs-identifier hs-var">toLower</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679390488"><span class="hs-identifier hs-var">str</span></a></span><span>
</span><span id="line-170"></span><span>
</span><span id="line-171"></span><span class="annot"><a href="XMonad.Prompt.Shell.html#compgenFiles"><span class="hs-identifier hs-type">compgenFiles</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="XMonad.Prompt.html#ComplCaseSensitivity"><span class="hs-identifier hs-type">ComplCaseSensitivity</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span>
</span><span id="line-172"></span><span id="compgenFiles"><span class="annot"><span class="annottext">compgenFiles :: ComplCaseSensitivity -&gt; String -&gt; IO String
</span><a href="XMonad.Prompt.Shell.html#compgenFiles"><span class="hs-identifier hs-var hs-var">compgenFiles</span></a></span></span><span> </span><span id="local-6989586621679390484"><span class="annot"><span class="annottext">ComplCaseSensitivity
</span><a href="#local-6989586621679390484"><span class="hs-identifier hs-var">csn</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ComplCaseSensitivity -&gt; String -&gt; String -&gt; IO String
</span><a href="XMonad.Prompt.Shell.html#compgen"><span class="hs-identifier hs-var">compgen</span></a></span><span> </span><span class="annot"><span class="annottext">ComplCaseSensitivity
</span><a href="#local-6989586621679390484"><span class="hs-identifier hs-var">csn</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;file&quot;</span></span><span>
</span><span id="line-173"></span><span>
</span><span id="line-174"></span><span class="annot"><a href="XMonad.Prompt.Shell.html#compgenDirectories"><span class="hs-identifier hs-type">compgenDirectories</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="XMonad.Prompt.html#ComplCaseSensitivity"><span class="hs-identifier hs-type">ComplCaseSensitivity</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span>
</span><span id="line-175"></span><span id="compgenDirectories"><span class="annot"><span class="annottext">compgenDirectories :: ComplCaseSensitivity -&gt; String -&gt; IO String
</span><a href="XMonad.Prompt.Shell.html#compgenDirectories"><span class="hs-identifier hs-var hs-var">compgenDirectories</span></a></span></span><span> </span><span id="local-6989586621679390482"><span class="annot"><span class="annottext">ComplCaseSensitivity
</span><a href="#local-6989586621679390482"><span class="hs-identifier hs-var">csn</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ComplCaseSensitivity -&gt; String -&gt; String -&gt; IO String
</span><a href="XMonad.Prompt.Shell.html#compgen"><span class="hs-identifier hs-var">compgen</span></a></span><span> </span><span class="annot"><span class="annottext">ComplCaseSensitivity
</span><a href="#local-6989586621679390482"><span class="hs-identifier hs-var">csn</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;directory&quot;</span></span><span>
</span><span id="line-176"></span><span>
</span><span id="line-177"></span><span class="annot"><a href="XMonad.Prompt.Shell.html#compgen"><span class="hs-identifier hs-type">compgen</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="XMonad.Prompt.html#ComplCaseSensitivity"><span class="hs-identifier hs-type">ComplCaseSensitivity</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span>
</span><span id="line-178"></span><span id="compgen"><span class="annot"><span class="annottext">compgen :: ComplCaseSensitivity -&gt; String -&gt; String -&gt; IO String
</span><a href="XMonad.Prompt.Shell.html#compgen"><span class="hs-identifier hs-var hs-var">compgen</span></a></span></span><span> </span><span id="local-6989586621679390481"><span class="annot"><span class="annottext">ComplCaseSensitivity
</span><a href="#local-6989586621679390481"><span class="hs-identifier hs-var">csn</span></a></span></span><span> </span><span id="local-6989586621679390480"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679390480"><span class="hs-identifier hs-var">actionOpt</span></a></span></span><span> </span><span id="local-6989586621679390479"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679390479"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; [String] -&gt; String -&gt; IO String
forall (m :: * -&gt; *).
MonadIO m =&gt;
String -&gt; [String] -&gt; String -&gt; m String
</span><a href="XMonad.Util.Run.html#runProcessWithInput"><span class="hs-identifier hs-var">runProcessWithInput</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;bash&quot;</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">(String -&gt; IO String) -&gt; String -&gt; IO String
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-179"></span><span>    </span><span class="annot"><span class="annottext">ComplCaseSensitivity -&gt; String
</span><a href="XMonad.Prompt.Shell.html#complCaseSensitivityCmd"><span class="hs-identifier hs-var">complCaseSensitivityCmd</span></a></span><span> </span><span class="annot"><span class="annottext">ComplCaseSensitivity
</span><a href="#local-6989586621679390481"><span class="hs-identifier hs-var">csn</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; ; &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
</span><a href="XMonad.Prompt.Shell.html#compgenCmd"><span class="hs-identifier hs-var">compgenCmd</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679390480"><span class="hs-identifier hs-var">actionOpt</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679390479"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-180"></span><span>
</span><span id="line-181"></span><span class="annot"><a href="XMonad.Prompt.Shell.html#complCaseSensitivityCmd"><span class="hs-identifier hs-type">complCaseSensitivityCmd</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="XMonad.Prompt.html#ComplCaseSensitivity"><span class="hs-identifier hs-type">ComplCaseSensitivity</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span>
</span><span id="line-182"></span><span id="complCaseSensitivityCmd"><span class="annot"><span class="annottext">complCaseSensitivityCmd :: ComplCaseSensitivity -&gt; String
</span><a href="XMonad.Prompt.Shell.html#complCaseSensitivityCmd"><span class="hs-identifier hs-var hs-var">complCaseSensitivityCmd</span></a></span></span><span> </span><span class="annot"><span class="annottext">ComplCaseSensitivity
</span><a href="XMonad.Prompt.html#CaseSensitive"><span class="hs-identifier hs-var">CaseSensitive</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-183"></span><span>    </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;bind 'set completion-ignore-case off'&quot;</span></span><span>
</span><span id="line-184"></span><span class="annot"><a href="XMonad.Prompt.Shell.html#complCaseSensitivityCmd"><span class="hs-identifier hs-var">complCaseSensitivityCmd</span></a></span><span> </span><span class="annot"><span class="annottext">ComplCaseSensitivity
</span><a href="XMonad.Prompt.html#CaseInSensitive"><span class="hs-identifier hs-var">CaseInSensitive</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-185"></span><span>    </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;bind 'set completion-ignore-case on'&quot;</span></span><span>
</span><span id="line-186"></span><span>
</span><span id="line-187"></span><span class="annot"><a href="XMonad.Prompt.Shell.html#compgenCmd"><span class="hs-identifier hs-type">compgenCmd</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span>
</span><span id="line-188"></span><span id="compgenCmd"><span class="annot"><span class="annottext">compgenCmd :: String -&gt; String -&gt; String
</span><a href="XMonad.Prompt.Shell.html#compgenCmd"><span class="hs-identifier hs-var hs-var">compgenCmd</span></a></span></span><span> </span><span id="local-6989586621679390474"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679390474"><span class="hs-identifier hs-var">actionOpt</span></a></span></span><span> </span><span id="local-6989586621679390473"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679390473"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;compgen -A &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679390474"><span class="hs-identifier hs-var">actionOpt</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; -- &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679390473"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\n&quot;</span></span><span>
</span><span id="line-189"></span><span>
</span><span id="line-190"></span><span class="annot"><a href="XMonad.Prompt.Shell.html#commandCompletionFunction"><span class="hs-identifier hs-type">commandCompletionFunction</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="XMonad.Prompt.Shell.html#Predicate"><span class="hs-identifier hs-type">Predicate</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">]</span><span>
</span><span id="line-191"></span><span id="commandCompletionFunction"><span class="annot"><span class="annottext">commandCompletionFunction :: [String] -&gt; Predicate -&gt; String -&gt; [String]
</span><a href="XMonad.Prompt.Shell.html#commandCompletionFunction"><span class="hs-identifier hs-var hs-var">commandCompletionFunction</span></a></span></span><span> </span><span id="local-6989586621679390472"><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679390472"><span class="hs-identifier hs-var">cmds</span></a></span></span><span> </span><span id="local-6989586621679390471"><span class="annot"><span class="annottext">Predicate
</span><a href="#local-6989586621679390471"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span id="local-6989586621679390470"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679390470"><span class="hs-identifier hs-var">str</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'/'</span></span><span> </span><span class="annot"><span class="annottext">Char -&gt; String -&gt; Bool
forall (t :: * -&gt; *) a. (Foldable t, Eq a) =&gt; a -&gt; t a -&gt; Bool
</span><span class="hs-operator hs-var">`elem`</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679390470"><span class="hs-identifier hs-var">str</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-192"></span><span>                                     </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(String -&gt; Bool) -&gt; [String] -&gt; [String]
forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">filter</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Predicate
</span><a href="#local-6989586621679390471"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679390470"><span class="hs-identifier hs-var">str</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679390472"><span class="hs-identifier hs-var">cmds</span></a></span><span>
</span><span id="line-193"></span><span>
</span><span id="line-194"></span><span class="annot"><a href="XMonad.Prompt.Shell.html#getCommands"><span class="hs-identifier hs-type">getCommands</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">]</span><span>
</span><span id="line-195"></span><span id="getCommands"><span class="annot"><span class="annottext">getCommands :: IO [String]
</span><a href="XMonad.Prompt.Shell.html#getCommands"><span class="hs-identifier hs-var hs-var">getCommands</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-196"></span><span>    </span><span id="local-6989586621679390468"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679390468"><span class="hs-identifier hs-var">p</span></a></span></span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">String -&gt; IO String
</span><span class="hs-identifier hs-var">getEnv</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;PATH&quot;</span></span><span> </span><span class="annot"><span class="annottext">IO String -&gt; (IOException -&gt; IO String) -&gt; IO String
forall e a. Exception e =&gt; IO a -&gt; (e -&gt; IO a) -&gt; IO a
</span><span class="hs-operator hs-var">`E.catch`</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; IOException -&gt; IO String
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; IOException -&gt; m a
</span><a href="XMonad.Prompt.Shell.html#econst"><span class="hs-identifier hs-var">econst</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-197"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679390466"><span class="annot"><span class="annottext">ds :: [String]
</span><a href="#local-6989586621679390466"><span class="hs-identifier hs-var hs-var">ds</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(String -&gt; Bool) -&gt; [String] -&gt; [String]
forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">filter</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Predicate
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">/=</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([String] -&gt; [String]) -&gt; [String] -&gt; [String]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Char -&gt; String -&gt; [String]
forall a. Eq a =&gt; a -&gt; [a] -&gt; [[a]]
</span><a href="XMonad.Prompt.Shell.html#split"><span class="hs-identifier hs-var">split</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">':'</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679390468"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-198"></span><span>    </span><span id="local-6989586621679390464"><span class="annot"><span class="annottext">[[String]]
</span><a href="#local-6989586621679390464"><span class="hs-identifier hs-var">es</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[String] -&gt; ComplFunction -&gt; IO [[String]]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
t a -&gt; (a -&gt; m b) -&gt; m (t b)
</span><span class="hs-identifier hs-var">forM</span></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679390466"><span class="hs-identifier hs-var">ds</span></a></span><span> </span><span class="annot"><span class="annottext">(ComplFunction -&gt; IO [[String]]) -&gt; ComplFunction -&gt; IO [[String]]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679390462"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679390462"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ComplFunction
</span><span class="hs-identifier hs-var">getDirectoryContents</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679390462"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="annot"><span class="annottext">IO [String] -&gt; (IOException -&gt; IO [String]) -&gt; IO [String]
forall e a. Exception e =&gt; IO a -&gt; (e -&gt; IO a) -&gt; IO a
</span><span class="hs-operator hs-var">`E.catch`</span></span><span> </span><span class="annot"><span class="annottext">[String] -&gt; IOException -&gt; IO [String]
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; IOException -&gt; m a
</span><a href="XMonad.Prompt.Shell.html#econst"><span class="hs-identifier hs-var">econst</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-199"></span><span>    </span><span class="annot"><span class="annottext">[String] -&gt; IO [String]
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">([String] -&gt; IO [String])
-&gt; ([[String]] -&gt; [String]) -&gt; [[String]] -&gt; IO [String]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">[String] -&gt; [String]
forall a. Ord a =&gt; [a] -&gt; [a]
</span><a href="XMonad.Prompt.html#uniqSort"><span class="hs-identifier hs-var">uniqSort</span></a></span><span> </span><span class="annot"><span class="annottext">([String] -&gt; [String])
-&gt; ([[String]] -&gt; [String]) -&gt; [[String]] -&gt; [String]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Bool) -&gt; [String] -&gt; [String]
forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">filter</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Char -&gt; Char -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">/=</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'.'</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Char -&gt; Bool) -&gt; (String -&gt; Char) -&gt; String -&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Char
forall a. [a] -&gt; a
</span><span class="hs-identifier hs-var">head</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([String] -&gt; [String])
-&gt; ([[String]] -&gt; [String]) -&gt; [[String]] -&gt; [String]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">[[String]] -&gt; [String]
forall (t :: * -&gt; *) a. Foldable t =&gt; t [a] -&gt; [a]
</span><span class="hs-identifier hs-var">concat</span></span><span> </span><span class="annot"><span class="annottext">([[String]] -&gt; IO [String]) -&gt; [[String]] -&gt; IO [String]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[[String]]
</span><a href="#local-6989586621679390464"><span class="hs-identifier hs-var">es</span></a></span><span>
</span><span id="line-200"></span><span>
</span><span id="line-201"></span><span id="local-6989586621679390598"><span class="annot"><a href="XMonad.Prompt.Shell.html#split"><span class="hs-identifier hs-type">split</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="annot"><a href="#local-6989586621679390598"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679390598"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679390598"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679390598"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span class="hs-special">]</span></span><span>
</span><span id="line-202"></span><span id="split"><span class="annot"><span class="annottext">split :: a -&gt; [a] -&gt; [[a]]
</span><a href="XMonad.Prompt.Shell.html#split"><span class="hs-identifier hs-var hs-var">split</span></a></span></span><span> </span><span class="annot"><span class="annottext">a
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-203"></span><span class="annot"><a href="XMonad.Prompt.Shell.html#split"><span class="hs-identifier hs-var">split</span></a></span><span> </span><span id="local-6989586621679390459"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679390459"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span id="local-6989586621679390458"><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621679390458"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-204"></span><span>    </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621679390457"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">[a] -&gt; [[a]] -&gt; [[a]]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; [a] -&gt; [[a]]
forall a. Eq a =&gt; a -&gt; [a] -&gt; [[a]]
</span><a href="XMonad.Prompt.Shell.html#split"><span class="hs-identifier hs-var">split</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679390459"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; [a] -&gt; [a]
forall a. Int -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">drop</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621679390455"><span class="hs-identifier hs-var">ls</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-205"></span><span>        </span><span class="hs-keyword">where</span><span>
</span><span id="line-206"></span><span>          </span><span class="hs-special">(</span><span id="local-6989586621679390457"><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621679390457"><span class="hs-identifier hs-var">f</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621679390455"><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621679390455"><span class="hs-identifier hs-var">ls</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a -&gt; Bool) -&gt; [a] -&gt; ([a], [a])
forall a. (a -&gt; Bool) -&gt; [a] -&gt; ([a], [a])
</span><span class="hs-identifier hs-var">span</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; a -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">/=</span></span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679390459"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621679390458"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-207"></span><span>
</span><span id="line-208"></span><span class="annot"><a href="XMonad.Prompt.Shell.html#escape"><span class="hs-identifier hs-type">escape</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span>
</span><span id="line-209"></span><span id="escape"><span class="annot"><span class="annottext">escape :: String -&gt; String
</span><a href="XMonad.Prompt.Shell.html#escape"><span class="hs-identifier hs-var hs-var">escape</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;&quot;</span></span><span>
</span><span id="line-210"></span><span class="annot"><a href="XMonad.Prompt.Shell.html#escape"><span class="hs-identifier hs-var">escape</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679390453"><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679390453"><span class="hs-identifier hs-var">x</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621679390452"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679390452"><span class="hs-identifier hs-var">xs</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-211"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Char -&gt; Bool
</span><a href="XMonad.Prompt.Shell.html#isSpecialChar"><span class="hs-identifier hs-var">isSpecialChar</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679390453"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'\\'</span></span><span> </span><span class="annot"><span class="annottext">Char -&gt; String -&gt; String
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679390453"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Char -&gt; String -&gt; String
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String
</span><a href="XMonad.Prompt.Shell.html#escape"><span class="hs-identifier hs-var">escape</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679390452"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-212"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679390453"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Char -&gt; String -&gt; String
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String
</span><a href="XMonad.Prompt.Shell.html#escape"><span class="hs-identifier hs-var">escape</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679390452"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-213"></span><span>
</span><span id="line-214"></span><span class="annot"><a href="XMonad.Prompt.Shell.html#isSpecialChar"><span class="hs-identifier hs-type">isSpecialChar</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Char</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-215"></span><span id="isSpecialChar"><span class="annot"><span class="annottext">isSpecialChar :: Char -&gt; Bool
</span><a href="XMonad.Prompt.Shell.html#isSpecialChar"><span class="hs-identifier hs-var hs-var">isSpecialChar</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>  </span><span class="annot"><span class="annottext">(Char -&gt; String -&gt; Bool) -&gt; String -&gt; Char -&gt; Bool
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">flip</span></span><span> </span><span class="annot"><span class="annottext">Char -&gt; String -&gt; Bool
forall (t :: * -&gt; *) a. (Foldable t, Eq a) =&gt; a -&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">elem</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; &amp;\\@\&quot;'#?$*()[]{};&quot;</span></span><span>
</span><span id="line-216"></span><span>
</span><span id="line-217"></span><span class="hs-comment">-- | Ask the shell environment for the value of a variable in XMonad's environment, with a default value.</span><span>
</span><span id="line-218"></span><span class="hs-comment">--   In order to /set/ an environment variable (eg. combine with a prompt so you can modify @$HTTP_PROXY@ dynamically),</span><span>
</span><span id="line-219"></span><span class="hs-comment">--   you need to use 'System.Posix.putEnv'.</span><span>
</span><span id="line-220"></span><span class="annot"><a href="XMonad.Prompt.Shell.html#env"><span class="hs-identifier hs-type">env</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span>
</span><span id="line-221"></span><span id="env"><span class="annot"><span class="annottext">env :: String -&gt; String -&gt; IO String
</span><a href="XMonad.Prompt.Shell.html#env"><span class="hs-identifier hs-var hs-var">env</span></a></span></span><span> </span><span id="local-6989586621679390448"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679390448"><span class="hs-identifier hs-var">variable</span></a></span></span><span> </span><span id="local-6989586621679390447"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679390447"><span class="hs-identifier hs-var">fallthrough</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; IO String
</span><span class="hs-identifier hs-var">getEnv</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679390448"><span class="hs-identifier hs-var">variable</span></a></span><span> </span><span class="annot"><span class="annottext">IO String -&gt; (IOException -&gt; IO String) -&gt; IO String
forall e a. Exception e =&gt; IO a -&gt; (e -&gt; IO a) -&gt; IO a
</span><span class="hs-operator hs-var">`E.catch`</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; IOException -&gt; IO String
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; IOException -&gt; m a
</span><a href="XMonad.Prompt.Shell.html#econst"><span class="hs-identifier hs-var">econst</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679390447"><span class="hs-identifier hs-var">fallthrough</span></a></span><span>
</span><span id="line-222"></span><span>
</span><span id="line-223"></span><span class="hs-comment">{- | Ask the shell what browser the user likes. If the user hasn't defined any
   $BROWSER, defaults to returning \&quot;firefox\&quot;, since that seems to be the most
   common X web browser.
   Note that if you don't specify a GUI browser but a textual one, that'll be a problem
   as 'getBrowser' will be called by functions expecting to be able to just execute the string
   or pass it to a shell; so in that case, define $BROWSER as something like \&quot;xterm -e elinks\&quot;
   or as the name of a shell script doing much the same thing. -}</span><span>
</span><span id="line-230"></span><span class="annot"><a href="XMonad.Prompt.Shell.html#getBrowser"><span class="hs-identifier hs-type">getBrowser</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span>
</span><span id="line-231"></span><span id="getBrowser"><span class="annot"><span class="annottext">getBrowser :: IO String
</span><a href="XMonad.Prompt.Shell.html#getBrowser"><span class="hs-identifier hs-var hs-var">getBrowser</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; IO String
</span><a href="XMonad.Prompt.Shell.html#env"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;BROWSER&quot;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;firefox&quot;</span></span><span>
</span><span id="line-232"></span><span>
</span><span id="line-233"></span><span class="hs-comment">-- | Like 'getBrowser', but should be of a text editor. This gets the $EDITOR variable, defaulting to \&quot;emacs\&quot;.</span><span>
</span><span id="line-234"></span><span class="annot"><a href="XMonad.Prompt.Shell.html#getEditor"><span class="hs-identifier hs-type">getEditor</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span>
</span><span id="line-235"></span><span id="getEditor"><span class="annot"><span class="annottext">getEditor :: IO String
</span><a href="XMonad.Prompt.Shell.html#getEditor"><span class="hs-identifier hs-var hs-var">getEditor</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; IO String
</span><a href="XMonad.Prompt.Shell.html#env"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;EDITOR&quot;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;emacs&quot;</span></span><span>
</span><span id="line-236"></span></pre></body></html>