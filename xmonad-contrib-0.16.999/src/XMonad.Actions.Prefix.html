<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE FlexibleContexts #-}</span><span>
</span><span id="line-2"></span><span>
</span><span id="line-3"></span><span class="hs-comment">-----------------------------------------------------------------------------</span><span>
</span><span id="line-4"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-5"></span><span class="hs-comment">-- Module      :  XMonad.Actions.Prefix</span><span>
</span><span id="line-6"></span><span class="hs-comment">-- Description :  Use an Emacs-style prefix argument for commands.</span><span>
</span><span id="line-7"></span><span class="hs-comment">-- Copyright   :  (c) Matus Goljer &lt;matus.goljer@gmail.com&gt;</span><span>
</span><span id="line-8"></span><span class="hs-comment">-- License     :  BSD3-style (see LICENSE)</span><span>
</span><span id="line-9"></span><span class="hs-comment">--</span><span>
</span><span id="line-10"></span><span class="hs-comment">-- Maintainer  :  Matus Goljer &lt;matus.goljer@gmail.com&gt;</span><span>
</span><span id="line-11"></span><span class="hs-comment">-- Stability   :  unstable</span><span>
</span><span id="line-12"></span><span class="hs-comment">-- Portability :  unportable</span><span>
</span><span id="line-13"></span><span class="hs-comment">--</span><span>
</span><span id="line-14"></span><span class="hs-comment">-- A module that allows the user to use a prefix argument (raw or numeric).</span><span>
</span><span id="line-15"></span><span class="hs-comment">--</span><span>
</span><span id="line-16"></span><span class="hs-comment">-----------------------------------------------------------------------------</span><span>
</span><span id="line-17"></span><span>
</span><span id="line-18"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">XMonad.Actions.Prefix</span><span>
</span><span id="line-19"></span><span>       </span><span class="hs-special">(</span><span>
</span><span id="line-20"></span><span>      </span><span class="annot"><span class="hs-comment">-- * Usage</span></span><span>
</span><span id="line-21"></span><span>      </span><span class="annot"><span class="hs-comment">-- $usage</span></span><span>
</span><span id="line-22"></span><span>
</span><span id="line-23"></span><span>      </span><span class="annot"><span class="hs-comment">-- * Installation</span></span><span>
</span><span id="line-24"></span><span>      </span><span class="annot"><span class="hs-comment">-- $installation</span></span><span>
</span><span id="line-25"></span><span>
</span><span id="line-26"></span><span>         </span><span class="annot"><a href="XMonad.Actions.Prefix.html#PrefixArgument"><span class="hs-identifier">PrefixArgument</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-27"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="XMonad.Actions.Prefix.html#usePrefixArgument"><span class="hs-identifier">usePrefixArgument</span></a></span><span>
</span><span id="line-28"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="XMonad.Actions.Prefix.html#useDefaultPrefixArgument"><span class="hs-identifier">useDefaultPrefixArgument</span></a></span><span>
</span><span id="line-29"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="XMonad.Actions.Prefix.html#withPrefixArgument"><span class="hs-identifier">withPrefixArgument</span></a></span><span>
</span><span id="line-30"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="XMonad.Actions.Prefix.html#isPrefixRaw"><span class="hs-identifier">isPrefixRaw</span></a></span><span>
</span><span id="line-31"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="XMonad.Actions.Prefix.html#isPrefixNumeric"><span class="hs-identifier">isPrefixNumeric</span></a></span><span>
</span><span id="line-32"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="XMonad.Actions.Prefix.html#ppFormatPrefix"><span class="hs-identifier">ppFormatPrefix</span></a></span><span>
</span><span id="line-33"></span><span>       </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-34"></span><span>
</span><span id="line-35"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Map</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">M</span></span><span>
</span><span id="line-36"></span><span>
</span><span id="line-37"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="XMonad.Prelude.html"><span class="hs-identifier">XMonad.Prelude</span></a></span><span>
</span><span id="line-38"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">XMonad</span></span><span>
</span><span id="line-39"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="XMonad.Util.ExtensibleState.html"><span class="hs-identifier">XMonad.Util.ExtensibleState</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">XS</span></span><span>
</span><span id="line-40"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="XMonad.Util.Paste.html"><span class="hs-identifier">XMonad.Util.Paste</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="XMonad.Util.Paste.html#sendKey"><span class="hs-identifier">sendKey</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-41"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="XMonad.Actions.Submap.html"><span class="hs-identifier">XMonad.Actions.Submap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="XMonad.Actions.Submap.html#submapDefaultWithKey"><span class="hs-identifier">submapDefaultWithKey</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-42"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="XMonad.Util.EZConfig.html"><span class="hs-identifier">XMonad.Util.EZConfig</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="XMonad.Util.EZConfig.html#readKeySequence"><span class="hs-identifier">readKeySequence</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-43"></span><span>
</span><span id="line-44"></span><span class="hs-comment">{- $usage

This module implements Emacs-style prefix argument.  The argument
comes in two flavours, &quot;Raw&quot; and &quot;Numeric&quot;.

To initiate the &quot;prefix mode&quot; you hit the prefix keybinding (default
C-u).  This sets the Raw argument value to 1.  Repeatedly hitting this
key increments the raw value by 1.  The Raw argument is usually used
as a toggle, changing the behaviour of the function called in some way.

An example might be calling &quot;mpc add&quot; to add new song to the playlist,
but with C-u we also clean up the playlist beforehand.

When in the &quot;Raw mode&quot;, you can hit numeric keys 0..9 (with no
modifier) to enter a &quot;Numeric argument&quot;.  Numeric argument represents
a natural number.  Hitting numeric keys in sequence produces the
decimal number that would result from typing them.  That is, the
sequence C-u 4 2 sets the Numeric argument value to the number 42.

If you have a function which understands the prefix argument, for example:

&gt;    addMaybeClean :: PrefixArgument -&gt; X ()
&gt;    addMaybeClean (Raw _) = spawn &quot;mpc clear&quot; &gt;&gt; spawn &quot;mpc add &lt;file&gt;&quot;
&gt;    addMaybeClean _ = spawn &quot;mpc add &lt;file&gt;&quot;

you can turn it into an X action with the function 'withPrefixArgument'.

Binding it in your config

&gt;    ((modm, xK_a), withPrefixArgument addMaybeClean)

Hitting MOD-a will add the &lt;file&gt; to the playlist while C-u MOD-a will
clear the playlist and then add the file.

You can of course use an anonymous action, like so:

&gt;    ((modm, xK_a), withPrefixArgument $ \prefix -&gt; do
&gt;        case prefix of ...
&gt;    )

If the prefix key is followed by a binding which is unknown to XMonad,
the prefix along with that binding is sent to the active window.

There is one caveat: when you use an application which has a nested
C-u binding, for example C-c C-u in Emacs org-mode, you have to hit
C-g (or any other non-recognized key really) to get out of the &quot;xmonad
grab&quot; and let the C-c C-u be sent to the application.

-}</span><span>
</span><span id="line-93"></span><span>
</span><span id="line-94"></span><span class="hs-comment">{- $installation

The simplest way to enable this is to use 'useDefaultPrefixArgument'

&gt;    xmonad $ useDefaultPrefixArgument $ def { .. }

The default prefix argument is C-u.  If you want to customize the
prefix argument, 'usePrefixArgument' can be used:

&gt;    xmonad $ usePrefixArgument &quot;M-u&quot; $ def { .. }

where the key is entered in Emacs style (or &quot;XMonad.Util.EZConfig&quot;
style) notation.  The letter `M` stands for your chosen modifier.  The
function defaults to C-u if the argument could not be parsed.
-}</span><span>
</span><span id="line-109"></span><span>
</span><span id="line-110"></span><span class="hs-keyword">data</span><span> </span><span id="PrefixArgument"><span class="annot"><a href="XMonad.Actions.Prefix.html#PrefixArgument"><span class="hs-identifier hs-var">PrefixArgument</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Raw"><span class="annot"><a href="XMonad.Actions.Prefix.html#Raw"><span class="hs-identifier hs-var">Raw</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="Numeric"><span class="annot"><a href="XMonad.Actions.Prefix.html#Numeric"><span class="hs-identifier hs-var">Numeric</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="None"><span class="annot"><a href="XMonad.Actions.Prefix.html#None"><span class="hs-identifier hs-var">None</span></a></span></span><span>
</span><span id="line-111"></span><span>                      </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679388344"><span id="local-6989586621679388346"><span id="local-6989586621679388348"><span id="local-6989586621679388350"><span class="annot"><span class="annottext">ReadPrec [PrefixArgument]
ReadPrec PrefixArgument
Int -&gt; ReadS PrefixArgument
ReadS [PrefixArgument]
(Int -&gt; ReadS PrefixArgument)
-&gt; ReadS [PrefixArgument]
-&gt; ReadPrec PrefixArgument
-&gt; ReadPrec [PrefixArgument]
-&gt; Read PrefixArgument
forall a.
(Int -&gt; ReadS a)
-&gt; ReadS [a] -&gt; ReadPrec a -&gt; ReadPrec [a] -&gt; Read a
readListPrec :: ReadPrec [PrefixArgument]
$creadListPrec :: ReadPrec [PrefixArgument]
readPrec :: ReadPrec PrefixArgument
$creadPrec :: ReadPrec PrefixArgument
readList :: ReadS [PrefixArgument]
$creadList :: ReadS [PrefixArgument]
readsPrec :: Int -&gt; ReadS PrefixArgument
$creadsPrec :: Int -&gt; ReadS PrefixArgument
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Read</span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679388337"><span id="local-6989586621679388339"><span id="local-6989586621679388341"><span class="annot"><span class="annottext">Int -&gt; PrefixArgument -&gt; ShowS
[PrefixArgument] -&gt; ShowS
PrefixArgument -&gt; String
(Int -&gt; PrefixArgument -&gt; ShowS)
-&gt; (PrefixArgument -&gt; String)
-&gt; ([PrefixArgument] -&gt; ShowS)
-&gt; Show PrefixArgument
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [PrefixArgument] -&gt; ShowS
$cshowList :: [PrefixArgument] -&gt; ShowS
show :: PrefixArgument -&gt; String
$cshow :: PrefixArgument -&gt; String
showsPrec :: Int -&gt; PrefixArgument -&gt; ShowS
$cshowsPrec :: Int -&gt; PrefixArgument -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-112"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ExtensionClass</span></span><span> </span><span class="annot"><a href="XMonad.Actions.Prefix.html#PrefixArgument"><span class="hs-identifier hs-type">PrefixArgument</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-113"></span><span>  </span><span id="local-6989586621679388331"><span class="annot"><span class="annottext">initialValue :: PrefixArgument
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">initialValue</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PrefixArgument
</span><a href="XMonad.Actions.Prefix.html#None"><span class="hs-identifier hs-var">None</span></a></span><span>
</span><span id="line-114"></span><span>  </span><span id="local-6989586621679388329"><span class="annot"><span class="annottext">extensionType :: PrefixArgument -&gt; StateExtension
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">extensionType</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PrefixArgument -&gt; StateExtension
forall a. (Read a, Show a, ExtensionClass a) =&gt; a -&gt; StateExtension
</span><span class="hs-identifier hs-var">PersistentExtension</span></span><span>
</span><span id="line-115"></span><span>
</span><span id="line-116"></span><span class="hs-comment">-- | Run 'job' in the 'X' monad and then execute 'cleanup'.  In case</span><span>
</span><span id="line-117"></span><span class="hs-comment">-- of exception, 'cleanup' is executed anyway.</span><span>
</span><span id="line-118"></span><span class="hs-comment">--</span><span>
</span><span id="line-119"></span><span class="hs-comment">-- Return the return value of 'job'.</span><span>
</span><span id="line-120"></span><span id="local-6989586621679388326"><span class="annot"><a href="XMonad.Actions.Prefix.html#finallyX"><span class="hs-identifier hs-type">finallyX</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">X</span></span><span> </span><span class="annot"><a href="#local-6989586621679388326"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">X</span></span><span> </span><span class="annot"><a href="#local-6989586621679388326"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">X</span></span><span> </span><span class="annot"><a href="#local-6989586621679388326"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-121"></span><span id="finallyX"><span class="annot"><span class="annottext">finallyX :: X a -&gt; X a -&gt; X a
</span><a href="XMonad.Actions.Prefix.html#finallyX"><span class="hs-identifier hs-var hs-var">finallyX</span></a></span></span><span> </span><span id="local-6989586621679388324"><span class="annot"><span class="annottext">X a
</span><a href="#local-6989586621679388324"><span class="hs-identifier hs-var">job</span></a></span></span><span> </span><span id="local-6989586621679388323"><span class="annot"><span class="annottext">X a
</span><a href="#local-6989586621679388323"><span class="hs-identifier hs-var">cleanup</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">X a -&gt; X a -&gt; X a
forall a. X a -&gt; X a -&gt; X a
</span><span class="hs-identifier hs-var">catchX</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">X a
</span><a href="#local-6989586621679388324"><span class="hs-identifier hs-var">job</span></a></span><span> </span><span class="annot"><span class="annottext">X a -&gt; (a -&gt; X a) -&gt; X a
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679388321"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679388321"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">X a
</span><a href="#local-6989586621679388323"><span class="hs-identifier hs-var">cleanup</span></a></span><span> </span><span class="annot"><span class="annottext">X a -&gt; X a -&gt; X a
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; m b -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; X a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679388321"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">X a
</span><a href="#local-6989586621679388323"><span class="hs-identifier hs-var">cleanup</span></a></span><span>
</span><span id="line-122"></span><span>
</span><span id="line-123"></span><span class="hs-comment">-- | Set up Prefix.  Defaults to C-u when given an invalid key.</span><span>
</span><span id="line-124"></span><span class="hs-comment">--</span><span>
</span><span id="line-125"></span><span class="hs-comment">-- See usage section.</span><span>
</span><span id="line-126"></span><span id="local-6989586621679388405"><span class="annot"><a href="XMonad.Actions.Prefix.html#usePrefixArgument"><span class="hs-identifier hs-type">usePrefixArgument</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">LayoutClass</span></span><span> </span><span class="annot"><a href="#local-6989586621679388405"><span class="hs-identifier hs-type">l</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Window</span></span><span>
</span><span id="line-127"></span><span>                  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span>
</span><span id="line-128"></span><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">XConfig</span></span><span> </span><span class="annot"><a href="#local-6989586621679388405"><span class="hs-identifier hs-type">l</span></a></span><span>
</span><span id="line-129"></span><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">XConfig</span></span><span> </span><span class="annot"><a href="#local-6989586621679388405"><span class="hs-identifier hs-type">l</span></a></span></span><span>
</span><span id="line-130"></span><span id="usePrefixArgument"><span class="annot"><span class="annottext">usePrefixArgument :: String -&gt; XConfig l -&gt; XConfig l
</span><a href="XMonad.Actions.Prefix.html#usePrefixArgument"><span class="hs-identifier hs-var hs-var">usePrefixArgument</span></a></span></span><span> </span><span id="local-6989586621679388319"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679388319"><span class="hs-identifier hs-var">prefix</span></a></span></span><span> </span><span id="local-6989586621679388318"><span class="annot"><span class="annottext">XConfig l
</span><a href="#local-6989586621679388318"><span class="hs-identifier hs-var">conf</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-131"></span><span>  </span><span class="annot"><span class="annottext">XConfig l
</span><a href="#local-6989586621679388318"><span class="hs-identifier hs-var">conf</span></a></span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">keys :: XConfig Layout -&gt; Map (ButtonMask, KeySym) (X ())
</span><span class="hs-identifier hs-var">keys</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(ButtonMask, KeySym)
-&gt; X ()
-&gt; Map (ButtonMask, KeySym) (X ())
-&gt; Map (ButtonMask, KeySym) (X ())
forall k a. Ord k =&gt; k -&gt; a -&gt; Map k a -&gt; Map k a
</span><span class="hs-identifier hs-var">M.insert</span></span><span> </span><span class="annot"><span class="annottext">(ButtonMask, KeySym)
</span><a href="#local-6989586621679388315"><span class="hs-identifier hs-var">binding</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(ButtonMask, KeySym)] -&gt; X ()
</span><a href="XMonad.Actions.Prefix.html#handlePrefixArg"><span class="hs-identifier hs-var">handlePrefixArg</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">(ButtonMask, KeySym)
</span><a href="#local-6989586621679388315"><span class="hs-identifier hs-var">binding</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Map (ButtonMask, KeySym) (X ())
 -&gt; Map (ButtonMask, KeySym) (X ()))
-&gt; (XConfig Layout -&gt; Map (ButtonMask, KeySym) (X ()))
-&gt; XConfig Layout
-&gt; Map (ButtonMask, KeySym) (X ())
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">XConfig l -&gt; XConfig Layout -&gt; Map (ButtonMask, KeySym) (X ())
forall (l :: * -&gt; *).
XConfig l -&gt; XConfig Layout -&gt; Map (ButtonMask, KeySym) (X ())
</span><span class="hs-identifier hs-var hs-var">keys</span></span><span> </span><span class="annot"><span class="annottext">XConfig l
</span><a href="#local-6989586621679388318"><span class="hs-identifier hs-var">conf</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-132"></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-133"></span><span>  </span><span id="local-6989586621679388315"><span class="annot"><span class="annottext">binding :: (ButtonMask, KeySym)
</span><a href="#local-6989586621679388315"><span class="hs-identifier hs-var hs-var">binding</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">XConfig l -&gt; String -&gt; Maybe [(ButtonMask, KeySym)]
forall (l :: * -&gt; *).
XConfig l -&gt; String -&gt; Maybe [(ButtonMask, KeySym)]
</span><a href="XMonad.Util.EZConfig.html#readKeySequence"><span class="hs-identifier hs-var">readKeySequence</span></a></span><span> </span><span class="annot"><span class="annottext">XConfig l
</span><a href="#local-6989586621679388318"><span class="hs-identifier hs-var">conf</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679388319"><span class="hs-identifier hs-var">prefix</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-134"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">[</span><span id="local-6989586621679388312"><span class="annot"><span class="annottext">(ButtonMask, KeySym)
</span><a href="#local-6989586621679388312"><span class="hs-identifier hs-var">key</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(ButtonMask, KeySym)
</span><a href="#local-6989586621679388312"><span class="hs-identifier hs-var">key</span></a></span><span>
</span><span id="line-135"></span><span>    </span><span class="annot"><span class="annottext">Maybe [(ButtonMask, KeySym)]
</span><span class="hs-identifier">_</span></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ButtonMask
</span><span class="hs-identifier hs-var">controlMask</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">KeySym
</span><span class="hs-identifier hs-var">xK_u</span></span><span class="hs-special">)</span><span>
</span><span id="line-136"></span><span>
</span><span id="line-137"></span><span class="hs-comment">-- | Set Prefix up with default prefix key (C-u).</span><span>
</span><span id="line-138"></span><span id="local-6989586621679388309"><span class="annot"><a href="XMonad.Actions.Prefix.html#useDefaultPrefixArgument"><span class="hs-identifier hs-type">useDefaultPrefixArgument</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">LayoutClass</span></span><span> </span><span class="annot"><a href="#local-6989586621679388309"><span class="hs-identifier hs-type">l</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Window</span></span><span>
</span><span id="line-139"></span><span>                         </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">XConfig</span></span><span> </span><span class="annot"><a href="#local-6989586621679388309"><span class="hs-identifier hs-type">l</span></a></span><span>
</span><span id="line-140"></span><span>                         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">XConfig</span></span><span> </span><span class="annot"><a href="#local-6989586621679388309"><span class="hs-identifier hs-type">l</span></a></span></span><span>
</span><span id="line-141"></span><span id="useDefaultPrefixArgument"><span class="annot"><span class="annottext">useDefaultPrefixArgument :: XConfig l -&gt; XConfig l
</span><a href="XMonad.Actions.Prefix.html#useDefaultPrefixArgument"><span class="hs-identifier hs-var hs-var">useDefaultPrefixArgument</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; XConfig l -&gt; XConfig l
forall (l :: * -&gt; *).
LayoutClass l KeySym =&gt;
String -&gt; XConfig l -&gt; XConfig l
</span><a href="XMonad.Actions.Prefix.html#usePrefixArgument"><span class="hs-identifier hs-var">usePrefixArgument</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;C-u&quot;</span></span><span>
</span><span id="line-142"></span><span>
</span><span id="line-143"></span><span class="annot"><a href="XMonad.Actions.Prefix.html#handlePrefixArg"><span class="hs-identifier hs-type">handlePrefixArg</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">KeyMask</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">KeySym</span></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">X</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-144"></span><span id="handlePrefixArg"><span class="annot"><span class="annottext">handlePrefixArg :: [(ButtonMask, KeySym)] -&gt; X ()
</span><a href="XMonad.Actions.Prefix.html#handlePrefixArg"><span class="hs-identifier hs-var hs-var">handlePrefixArg</span></a></span></span><span> </span><span id="local-6989586621679388307"><span class="annot"><span class="annottext">[(ButtonMask, KeySym)]
</span><a href="#local-6989586621679388307"><span class="hs-identifier hs-var">events</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-145"></span><span>  </span><span id="local-6989586621679388306"><span class="annot"><span class="annottext">Map (ButtonMask, KeySym) (X ())
</span><a href="#local-6989586621679388306"><span class="hs-identifier hs-var">ks</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(XConf -&gt; Map (ButtonMask, KeySym) (X ()))
-&gt; X (Map (ButtonMask, KeySym) (X ()))
forall r (m :: * -&gt; *) a. MonadReader r m =&gt; (r -&gt; a) -&gt; m a
</span><span class="hs-identifier hs-var">asks</span></span><span> </span><span class="annot"><span class="annottext">XConf -&gt; Map (ButtonMask, KeySym) (X ())
</span><span class="hs-identifier hs-var hs-var">keyActions</span></span><span>
</span><span id="line-146"></span><span>  </span><span id="local-6989586621679388303"><span class="annot"><span class="annottext">X ()
</span><a href="#local-6989586621679388303"><span class="hs-identifier hs-var">logger</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(XConf -&gt; X ()) -&gt; X (X ())
forall r (m :: * -&gt; *) a. MonadReader r m =&gt; (r -&gt; a) -&gt; m a
</span><span class="hs-identifier hs-var">asks</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XConfig Layout -&gt; X ()
forall (l :: * -&gt; *). XConfig l -&gt; X ()
</span><span class="hs-identifier hs-var hs-var">logHook</span></span><span> </span><span class="annot"><span class="annottext">(XConfig Layout -&gt; X ())
-&gt; (XConf -&gt; XConfig Layout) -&gt; XConf -&gt; X ()
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">XConf -&gt; XConfig Layout
</span><span class="hs-identifier hs-var hs-var">config</span></span><span class="hs-special">)</span><span>
</span><span id="line-147"></span><span>  </span><span class="annot"><span class="annottext">(X () -&gt; X () -&gt; X ()) -&gt; X () -&gt; X () -&gt; X ()
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">flip</span></span><span> </span><span class="annot"><span class="annottext">X () -&gt; X () -&gt; X ()
forall a. X a -&gt; X a -&gt; X a
</span><a href="XMonad.Actions.Prefix.html#finallyX"><span class="hs-identifier hs-var">finallyX</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrefixArgument -&gt; X ()
forall a (m :: * -&gt; *). (ExtensionClass a, XLike m) =&gt; a -&gt; m ()
</span><a href="XMonad.Util.ExtensibleState.html#put"><span class="hs-identifier hs-var">XS.put</span></a></span><span> </span><span class="annot"><span class="annottext">PrefixArgument
</span><a href="XMonad.Actions.Prefix.html#None"><span class="hs-identifier hs-var">None</span></a></span><span> </span><span class="annot"><span class="annottext">X () -&gt; X () -&gt; X ()
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; m b -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">X ()
</span><a href="#local-6989586621679388303"><span class="hs-identifier hs-var">logger</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(X () -&gt; X ()) -&gt; X () -&gt; X ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-148"></span><span>    </span><span id="local-6989586621679388298"><span class="annot"><span class="annottext">PrefixArgument
</span><a href="#local-6989586621679388298"><span class="hs-identifier hs-var">prefix</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">X PrefixArgument
forall a (m :: * -&gt; *). (ExtensionClass a, XLike m) =&gt; m a
</span><a href="XMonad.Util.ExtensibleState.html#get"><span class="hs-identifier hs-var">XS.get</span></a></span><span>
</span><span id="line-149"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">PrefixArgument
</span><a href="#local-6989586621679388298"><span class="hs-identifier hs-var">prefix</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-150"></span><span>      </span><span class="annot"><a href="XMonad.Actions.Prefix.html#Raw"><span class="hs-identifier hs-type">Raw</span></a></span><span> </span><span id="local-6989586621679388296"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679388296"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PrefixArgument -&gt; X ()
forall a (m :: * -&gt; *). (ExtensionClass a, XLike m) =&gt; a -&gt; m ()
</span><a href="XMonad.Util.ExtensibleState.html#put"><span class="hs-identifier hs-var">XS.put</span></a></span><span> </span><span class="annot"><span class="annottext">(PrefixArgument -&gt; X ()) -&gt; PrefixArgument -&gt; X ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; PrefixArgument
</span><a href="XMonad.Actions.Prefix.html#Raw"><span class="hs-identifier hs-var">Raw</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679388296"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span>
</span><span id="line-151"></span><span>      </span><span class="annot"><span class="annottext">PrefixArgument
</span><a href="XMonad.Actions.Prefix.html#None"><span class="hs-identifier hs-var">None</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PrefixArgument -&gt; X ()
forall a (m :: * -&gt; *). (ExtensionClass a, XLike m) =&gt; a -&gt; m ()
</span><a href="XMonad.Util.ExtensibleState.html#put"><span class="hs-identifier hs-var">XS.put</span></a></span><span> </span><span class="annot"><span class="annottext">(PrefixArgument -&gt; X ()) -&gt; PrefixArgument -&gt; X ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; PrefixArgument
</span><a href="XMonad.Actions.Prefix.html#Raw"><span class="hs-identifier hs-var">Raw</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span>
</span><span id="line-152"></span><span>      </span><span class="annot"><span class="annottext">PrefixArgument
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">() -&gt; X ()
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-153"></span><span>    </span><span class="annot"><span class="annottext">X ()
</span><a href="#local-6989586621679388303"><span class="hs-identifier hs-var">logger</span></a></span><span>
</span><span id="line-154"></span><span>    </span><span class="annot"><span class="annottext">((ButtonMask, KeySym) -&gt; X ())
-&gt; Map (ButtonMask, KeySym) (X ()) -&gt; X ()
</span><a href="XMonad.Actions.Submap.html#submapDefaultWithKey"><span class="hs-identifier hs-var">submapDefaultWithKey</span></a></span><span> </span><span class="annot"><span class="annottext">(ButtonMask, KeySym) -&gt; X ()
</span><a href="#local-6989586621679388294"><span class="hs-identifier hs-var">defaultKey</span></a></span><span> </span><span class="annot"><span class="annottext">Map (ButtonMask, KeySym) (X ())
</span><a href="#local-6989586621679388306"><span class="hs-identifier hs-var">ks</span></a></span><span>
</span><span id="line-155"></span><span>  </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621679388294"><span class="annot"><span class="annottext">defaultKey :: (ButtonMask, KeySym) -&gt; X ()
</span><a href="#local-6989586621679388294"><span class="hs-identifier hs-var hs-var">defaultKey</span></a></span></span><span> </span><span id="local-6989586621679388293"><span class="annot"><span class="annottext">key :: (ButtonMask, KeySym)
</span><a href="#local-6989586621679388293"><span class="hs-identifier hs-var">key</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span id="local-6989586621679388292"><span class="annot"><span class="annottext">ButtonMask
</span><a href="#local-6989586621679388292"><span class="hs-identifier hs-var">m</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679388291"><span class="annot"><span class="annottext">KeySym
</span><a href="#local-6989586621679388291"><span class="hs-identifier hs-var">k</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-156"></span><span>          </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">KeySym
</span><a href="#local-6989586621679388291"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">KeySym -&gt; [KeySym] -&gt; Bool
forall (t :: * -&gt; *) a. (Foldable t, Eq a) =&gt; a -&gt; t a -&gt; Bool
</span><span class="hs-operator hs-var">`elem`</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">KeySym
</span><span class="hs-identifier hs-var">xK_0</span></span><span> </span><span class="annot"><span class="annottext">KeySym -&gt; [KeySym] -&gt; [KeySym]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">KeySym
</span><span class="hs-identifier hs-var">xK_1</span></span><span> </span><span class="hs-glyph">..</span><span> </span><span class="annot"><span class="annottext">KeySym
</span><span class="hs-identifier hs-var">xK_9</span></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">ButtonMask
</span><a href="#local-6989586621679388292"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">ButtonMask -&gt; ButtonMask -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">ButtonMask
</span><span class="hs-identifier hs-var">noModMask</span></span><span>
</span><span id="line-157"></span><span>          </span><span class="hs-keyword">then</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-158"></span><span>            </span><span id="local-6989586621679388284"><span class="annot"><span class="annottext">PrefixArgument
</span><a href="#local-6989586621679388284"><span class="hs-identifier hs-var">prefix</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">X PrefixArgument
forall a (m :: * -&gt; *). (ExtensionClass a, XLike m) =&gt; m a
</span><a href="XMonad.Util.ExtensibleState.html#get"><span class="hs-identifier hs-var">XS.get</span></a></span><span>
</span><span id="line-159"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679388283"><span class="annot"><span class="annottext">x :: Int
</span><a href="#local-6989586621679388283"><span class="hs-identifier hs-var hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Int -&gt; Int
forall a. HasCallStack =&gt; Maybe a -&gt; a
</span><span class="hs-identifier hs-var">fromJust</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">KeySym -&gt; [(KeySym, Int)] -&gt; Maybe Int
forall a b. Eq a =&gt; a -&gt; [(a, b)] -&gt; Maybe b
</span><span class="hs-identifier hs-var">Prelude.lookup</span></span><span> </span><span class="annot"><span class="annottext">KeySym
</span><a href="#local-6989586621679388291"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">[(KeySym, Int)]
</span><a href="#local-6989586621679388280"><span class="hs-identifier hs-var">keyToNum</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-160"></span><span>            </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">PrefixArgument
</span><a href="#local-6989586621679388284"><span class="hs-identifier hs-var">prefix</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-161"></span><span>              </span><span class="annot"><a href="XMonad.Actions.Prefix.html#Raw"><span class="hs-identifier hs-type">Raw</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PrefixArgument -&gt; X ()
forall a (m :: * -&gt; *). (ExtensionClass a, XLike m) =&gt; a -&gt; m ()
</span><a href="XMonad.Util.ExtensibleState.html#put"><span class="hs-identifier hs-var">XS.put</span></a></span><span> </span><span class="annot"><span class="annottext">(PrefixArgument -&gt; X ()) -&gt; PrefixArgument -&gt; X ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; PrefixArgument
</span><a href="XMonad.Actions.Prefix.html#Numeric"><span class="hs-identifier hs-var">Numeric</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679388283"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-162"></span><span>              </span><span class="annot"><a href="XMonad.Actions.Prefix.html#Numeric"><span class="hs-identifier hs-type">Numeric</span></a></span><span> </span><span id="local-6989586621679388279"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679388279"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PrefixArgument -&gt; X ()
forall a (m :: * -&gt; *). (ExtensionClass a, XLike m) =&gt; a -&gt; m ()
</span><a href="XMonad.Util.ExtensibleState.html#put"><span class="hs-identifier hs-var">XS.put</span></a></span><span> </span><span class="annot"><span class="annottext">(PrefixArgument -&gt; X ()) -&gt; PrefixArgument -&gt; X ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; PrefixArgument
</span><a href="XMonad.Actions.Prefix.html#Numeric"><span class="hs-identifier hs-var">Numeric</span></a></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; PrefixArgument) -&gt; Int -&gt; PrefixArgument
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679388279"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">*</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">10</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679388283"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-163"></span><span>              </span><span class="annot"><span class="annottext">PrefixArgument
</span><a href="XMonad.Actions.Prefix.html#None"><span class="hs-identifier hs-var">None</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">() -&gt; X ()
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- should never happen</span><span>
</span><span id="line-164"></span><span>            </span><span class="annot"><span class="annottext">[(ButtonMask, KeySym)] -&gt; X ()
</span><a href="XMonad.Actions.Prefix.html#handlePrefixArg"><span class="hs-identifier hs-var">handlePrefixArg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(ButtonMask, KeySym)
</span><a href="#local-6989586621679388293"><span class="hs-identifier hs-var">key</span></a></span><span class="annot"><span class="annottext">(ButtonMask, KeySym)
-&gt; [(ButtonMask, KeySym)] -&gt; [(ButtonMask, KeySym)]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">[(ButtonMask, KeySym)]
</span><a href="#local-6989586621679388307"><span class="hs-identifier hs-var">events</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-165"></span><span>          </span><span class="hs-keyword">else</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-166"></span><span>            </span><span id="local-6989586621679388277"><span class="annot"><span class="annottext">PrefixArgument
</span><a href="#local-6989586621679388277"><span class="hs-identifier hs-var">prefix</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">X PrefixArgument
forall a (m :: * -&gt; *). (ExtensionClass a, XLike m) =&gt; m a
</span><a href="XMonad.Util.ExtensibleState.html#get"><span class="hs-identifier hs-var">XS.get</span></a></span><span>
</span><span id="line-167"></span><span>            </span><span class="annot"><span class="annottext">((ButtonMask, KeySym) -&gt; X ()) -&gt; [(ButtonMask, KeySym)] -&gt; X ()
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m ()
</span><span class="hs-identifier hs-var">mapM_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(ButtonMask -&gt; KeySym -&gt; X ()) -&gt; (ButtonMask, KeySym) -&gt; X ()
forall a b c. (a -&gt; b -&gt; c) -&gt; (a, b) -&gt; c
</span><span class="hs-identifier hs-var">uncurry</span></span><span> </span><span class="annot"><span class="annottext">ButtonMask -&gt; KeySym -&gt; X ()
</span><a href="XMonad.Util.Paste.html#sendKey"><span class="hs-identifier hs-var">sendKey</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([(ButtonMask, KeySym)] -&gt; X ()) -&gt; [(ButtonMask, KeySym)] -&gt; X ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">PrefixArgument
</span><a href="#local-6989586621679388277"><span class="hs-identifier hs-var">prefix</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-168"></span><span>              </span><span class="annot"><a href="XMonad.Actions.Prefix.html#Raw"><span class="hs-identifier hs-type">Raw</span></a></span><span> </span><span id="local-6989586621679388274"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679388274"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; (ButtonMask, KeySym) -&gt; [(ButtonMask, KeySym)]
forall a. Int -&gt; a -&gt; [a]
</span><span class="hs-identifier hs-var">replicate</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679388274"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(ButtonMask, KeySym)] -&gt; (ButtonMask, KeySym)
forall a. [a] -&gt; a
</span><span class="hs-identifier hs-var">head</span></span><span> </span><span class="annot"><span class="annottext">[(ButtonMask, KeySym)]
</span><a href="#local-6989586621679388307"><span class="hs-identifier hs-var">events</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(ButtonMask, KeySym)]
-&gt; [(ButtonMask, KeySym)] -&gt; [(ButtonMask, KeySym)]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">(ButtonMask, KeySym)
</span><a href="#local-6989586621679388293"><span class="hs-identifier hs-var">key</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-169"></span><span>              </span><span class="annot"><span class="annottext">PrefixArgument
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[(ButtonMask, KeySym)] -&gt; [(ButtonMask, KeySym)]
forall a. [a] -&gt; [a]
</span><span class="hs-identifier hs-var">reverse</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(ButtonMask, KeySym)
</span><a href="#local-6989586621679388293"><span class="hs-identifier hs-var">key</span></a></span><span class="annot"><span class="annottext">(ButtonMask, KeySym)
-&gt; [(ButtonMask, KeySym)] -&gt; [(ButtonMask, KeySym)]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">[(ButtonMask, KeySym)]
</span><a href="#local-6989586621679388307"><span class="hs-identifier hs-var">events</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-170"></span><span>        </span><span id="local-6989586621679388280"><span class="annot"><span class="annottext">keyToNum :: [(KeySym, Int)]
</span><a href="#local-6989586621679388280"><span class="hs-identifier hs-var hs-var">keyToNum</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">KeySym
</span><span class="hs-identifier hs-var">xK_0</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(KeySym, Int) -&gt; [(KeySym, Int)] -&gt; [(KeySym, Int)]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[KeySym] -&gt; [Int] -&gt; [(KeySym, Int)]
forall a b. [a] -&gt; [b] -&gt; [(a, b)]
</span><span class="hs-identifier hs-var">zip</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">KeySym
</span><span class="hs-identifier hs-var">xK_1</span></span><span> </span><span class="hs-glyph">..</span><span> </span><span class="annot"><span class="annottext">KeySym
</span><span class="hs-identifier hs-var">xK_9</span></span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-glyph">..</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">9</span></span><span class="hs-special">]</span><span>
</span><span id="line-171"></span><span>
</span><span id="line-172"></span><span class="hs-comment">-- | Turn a prefix-aware X action into an X-action.</span><span>
</span><span id="line-173"></span><span class="hs-comment">--</span><span>
</span><span id="line-174"></span><span class="hs-comment">-- First, fetch the current prefix, then pass it as argument to the</span><span>
</span><span id="line-175"></span><span class="hs-comment">-- original function.  You should use this to &quot;run&quot; your commands.</span><span>
</span><span id="line-176"></span><span class="annot"><a href="XMonad.Actions.Prefix.html#withPrefixArgument"><span class="hs-identifier hs-type">withPrefixArgument</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="XMonad.Actions.Prefix.html#PrefixArgument"><span class="hs-identifier hs-type">PrefixArgument</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">X</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">X</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-177"></span><span id="withPrefixArgument"><span class="annot"><span class="annottext">withPrefixArgument :: (PrefixArgument -&gt; X ()) -&gt; X ()
</span><a href="XMonad.Actions.Prefix.html#withPrefixArgument"><span class="hs-identifier hs-var hs-var">withPrefixArgument</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">X PrefixArgument -&gt; (PrefixArgument -&gt; X ()) -&gt; X ()
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">(&gt;&gt;=)</span></span><span> </span><span class="annot"><span class="annottext">X PrefixArgument
forall a (m :: * -&gt; *). (ExtensionClass a, XLike m) =&gt; m a
</span><a href="XMonad.Util.ExtensibleState.html#get"><span class="hs-identifier hs-var">XS.get</span></a></span><span>
</span><span id="line-178"></span><span>
</span><span id="line-179"></span><span class="hs-comment">-- | Test if 'PrefixArgument' is 'Raw' or not.</span><span>
</span><span id="line-180"></span><span class="annot"><a href="XMonad.Actions.Prefix.html#isPrefixRaw"><span class="hs-identifier hs-type">isPrefixRaw</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="XMonad.Actions.Prefix.html#PrefixArgument"><span class="hs-identifier hs-type">PrefixArgument</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-181"></span><span id="isPrefixRaw"><span class="annot"><span class="annottext">isPrefixRaw :: PrefixArgument -&gt; Bool
</span><a href="XMonad.Actions.Prefix.html#isPrefixRaw"><span class="hs-identifier hs-var hs-var">isPrefixRaw</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="XMonad.Actions.Prefix.html#Raw"><span class="hs-identifier hs-type">Raw</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-182"></span><span class="annot"><a href="XMonad.Actions.Prefix.html#isPrefixRaw"><span class="hs-identifier hs-var">isPrefixRaw</span></a></span><span> </span><span class="annot"><span class="annottext">PrefixArgument
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-183"></span><span>
</span><span id="line-184"></span><span class="hs-comment">-- | Test if 'PrefixArgument' is 'Numeric' or not.</span><span>
</span><span id="line-185"></span><span class="annot"><a href="XMonad.Actions.Prefix.html#isPrefixNumeric"><span class="hs-identifier hs-type">isPrefixNumeric</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="XMonad.Actions.Prefix.html#PrefixArgument"><span class="hs-identifier hs-type">PrefixArgument</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-186"></span><span id="isPrefixNumeric"><span class="annot"><span class="annottext">isPrefixNumeric :: PrefixArgument -&gt; Bool
</span><a href="XMonad.Actions.Prefix.html#isPrefixNumeric"><span class="hs-identifier hs-var hs-var">isPrefixNumeric</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="XMonad.Actions.Prefix.html#Numeric"><span class="hs-identifier hs-type">Numeric</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-187"></span><span class="annot"><a href="XMonad.Actions.Prefix.html#isPrefixNumeric"><span class="hs-identifier hs-var">isPrefixNumeric</span></a></span><span> </span><span class="annot"><span class="annottext">PrefixArgument
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-188"></span><span>
</span><span id="line-189"></span><span class="hs-comment">-- | Format the prefix using the Emacs convetion for use in a</span><span>
</span><span id="line-190"></span><span class="hs-comment">-- statusbar, like xmobar.</span><span>
</span><span id="line-191"></span><span class="hs-comment">--</span><span>
</span><span id="line-192"></span><span class="hs-comment">-- To add this formatted prefix to printer output, you can set it up</span><span>
</span><span id="line-193"></span><span class="hs-comment">-- like so</span><span>
</span><span id="line-194"></span><span class="hs-comment">--</span><span>
</span><span id="line-195"></span><span class="hs-comment">-- &gt; myPrinter :: PP</span><span>
</span><span id="line-196"></span><span class="hs-comment">-- &gt; myPrinter = def { ppExtras = [ppFormatPrefix] }</span><span>
</span><span id="line-197"></span><span class="hs-comment">--</span><span>
</span><span id="line-198"></span><span class="hs-comment">-- And then add to your status bar using &quot;XMonad.Hooks.StatusBar&quot;:</span><span>
</span><span id="line-199"></span><span class="hs-comment">--</span><span>
</span><span id="line-200"></span><span class="hs-comment">-- &gt; mySB = statusBarProp &quot;xmobar&quot; myPrinter</span><span>
</span><span id="line-201"></span><span class="hs-comment">-- &gt; main = xmonad $ withEasySB mySB defToggleStrutsKey def</span><span>
</span><span id="line-202"></span><span class="hs-comment">--</span><span>
</span><span id="line-203"></span><span class="hs-comment">-- Or, directly in your 'logHook' configuration</span><span>
</span><span id="line-204"></span><span class="hs-comment">--</span><span>
</span><span id="line-205"></span><span class="hs-comment">-- &gt; logHook = dynamicLogWithPP myPrinter</span><span>
</span><span id="line-206"></span><span class="annot"><a href="XMonad.Actions.Prefix.html#ppFormatPrefix"><span class="hs-identifier hs-type">ppFormatPrefix</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">X</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">)</span><span>
</span><span id="line-207"></span><span id="ppFormatPrefix"><span class="annot"><span class="annottext">ppFormatPrefix :: X (Maybe String)
</span><a href="XMonad.Actions.Prefix.html#ppFormatPrefix"><span class="hs-identifier hs-var hs-var">ppFormatPrefix</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-208"></span><span>  </span><span id="local-6989586621679388270"><span class="annot"><span class="annottext">PrefixArgument
</span><a href="#local-6989586621679388270"><span class="hs-identifier hs-var">prefix</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">X PrefixArgument
forall a (m :: * -&gt; *). (ExtensionClass a, XLike m) =&gt; m a
</span><a href="XMonad.Util.ExtensibleState.html#get"><span class="hs-identifier hs-var">XS.get</span></a></span><span>
</span><span id="line-209"></span><span>  </span><span class="annot"><span class="annottext">Maybe String -&gt; X (Maybe String)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Maybe String -&gt; X (Maybe String))
-&gt; Maybe String -&gt; X (Maybe String)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">PrefixArgument
</span><a href="#local-6989586621679388270"><span class="hs-identifier hs-var">prefix</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-210"></span><span>    </span><span class="annot"><a href="XMonad.Actions.Prefix.html#Raw"><span class="hs-identifier hs-type">Raw</span></a></span><span> </span><span id="local-6989586621679388269"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679388269"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; Maybe String
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Maybe String) -&gt; String -&gt; Maybe String
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; ShowS) -&gt; [String] -&gt; String
forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; a -&gt; a) -&gt; t a -&gt; a
</span><span class="hs-identifier hs-var">foldr1</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679388267"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679388267"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621679388266"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679388266"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679388267"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679388266"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([String] -&gt; String) -&gt; [String] -&gt; String
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; String -&gt; [String]
forall a. Int -&gt; a -&gt; [a]
</span><span class="hs-identifier hs-var">replicate</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679388269"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;C-u&quot;</span></span><span>
</span><span id="line-211"></span><span>    </span><span class="annot"><a href="XMonad.Actions.Prefix.html#Numeric"><span class="hs-identifier hs-type">Numeric</span></a></span><span> </span><span id="local-6989586621679388265"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679388265"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; Maybe String
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Maybe String) -&gt; String -&gt; Maybe String
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;C-u &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679388265"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-212"></span><span>    </span><span class="annot"><span class="annottext">PrefixArgument
</span><a href="XMonad.Actions.Prefix.html#None"><span class="hs-identifier hs-var">None</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe String
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-213"></span></pre></body></html>